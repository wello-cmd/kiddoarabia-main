var ur=Object.freeze,cl=Object.defineProperty;var b=(s,e)=>ur(cl(s,"raw",{value:ur(e||s.slice())}));import{j as i,m as ul}from"./ui-BC1haJvr.js";import{r as H,u as dl,e as hl,L as be,R as $e}from"./vendor-BKSuygQJ.js";import{m as Se,A as dt}from"./animations-Ds2f-LDj.js";import{c as rt,u as gs,B as ge,C as xi,d as fl,e as ml,b as vi,S as pl}from"./index-i51j1783.js";import{a as gl}from"./utils-DVKmsZDP.js";import{t as es,s as dr,u as hr,G as fr,v as mr,w as pr,X as _s,x as _l,f as gr,M as yl,P as bl,a as wl,F as xl,y as vl,Y as Al,z as Sl,g as El,B as Cl,D as Tl,n as kl}from"./icons-gF2hkoP3.js";/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Ai,setPrototypeOf:_r,isFrozen:Rl,getPrototypeOf:Nl,getOwnPropertyDescriptor:Ol}=Object;let{freeze:ce,seal:xe,create:Si}=Object,{apply:ts,construct:ns}=typeof Reflect<"u"&&Reflect;ce||(ce=function(e){return e});xe||(xe=function(e){return e});ts||(ts=function(e,t,n){return e.apply(t,n)});ns||(ns=function(e,t){return new e(...t)});const Wt=ue(Array.prototype.forEach),Il=ue(Array.prototype.lastIndexOf),yr=ue(Array.prototype.pop),ht=ue(Array.prototype.push),Pl=ue(Array.prototype.splice),tn=ue(String.prototype.toLowerCase),Un=ue(String.prototype.toString),br=ue(String.prototype.match),ft=ue(String.prototype.replace),jl=ue(String.prototype.indexOf),Ml=ue(String.prototype.trim),ve=ue(Object.prototype.hasOwnProperty),oe=ue(RegExp.prototype.test),mt=Ll(TypeError);function ue(s){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ts(s,e,n)}}function Ll(s){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ns(s,t)}}function D(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tn;_r&&_r(s,null);let n=e.length;for(;n--;){let r=e[n];if(typeof r=="string"){const a=t(r);a!==r&&(Rl(e)||(e[n]=a),r=a)}s[r]=!0}return s}function $l(s){for(let e=0;e<s.length;e++)ve(s,e)||(s[e]=null);return s}function Pe(s){const e=Si(null);for(const[t,n]of Ai(s))ve(s,t)&&(Array.isArray(n)?e[t]=$l(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=Pe(n):e[t]=n);return e}function pt(s,e){for(;s!==null;){const n=Ol(s,e);if(n){if(n.get)return ue(n.get);if(typeof n.value=="function")return ue(n.value)}s=Nl(s)}function t(){return null}return t}const wr=ce(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Bn=ce(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Wn=ce(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Dl=ce(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hn=ce(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Fl=ce(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xr=ce(["#text"]),vr=ce(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),zn=ce(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ar=ce(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ht=ce(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ul=xe(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Bl=xe(/<%[\w\W]*|[\w\W]*%>/gm),Wl=xe(/\$\{[\w\W]*/gm),Hl=xe(/^data-[\-\w.\u00B7-\uFFFF]+$/),zl=xe(/^aria-[\-\w]+$/),Ei=xe(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ql=xe(/^(?:\w+script|data):/i),Gl=xe(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ci=xe(/^html$/i),Xl=xe(/^[a-z][.\w]*(-[.\w]+)+$/i);var Sr=Object.freeze({__proto__:null,ARIA_ATTR:zl,ATTR_WHITESPACE:Gl,CUSTOM_ELEMENT:Xl,DATA_ATTR:Hl,DOCTYPE_NAME:Ci,ERB_EXPR:Bl,IS_ALLOWED_URI:Ei,IS_SCRIPT_OR_DATA:ql,MUSTACHE_EXPR:Ul,TMPLIT_EXPR:Wl});const gt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Jl=function(){return typeof window>"u"?null:window},Kl=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch(o){return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Er=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ti(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Jl();const e=T=>Ti(T);if(e.version="3.2.6",e.removed=[],!s||!s.document||s.document.nodeType!==gt.document||!s.Element)return e.isSupported=!1,e;let{document:t}=s;const n=t,r=n.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:c,Element:d,NodeFilter:h,NamedNodeMap:p=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:f,DOMParser:y,trustedTypes:m}=s,w=d.prototype,R=pt(w,"cloneNode"),A=pt(w,"remove"),U=pt(w,"nextSibling"),E=pt(w,"childNodes"),B=pt(w,"parentNode");if(typeof o=="function"){const T=t.createElement("template");T.content&&T.content.ownerDocument&&(t=T.content.ownerDocument)}let N,_="";const{implementation:v,createNodeIterator:C,createDocumentFragment:L,getElementsByTagName:j}=t,{importNode:$}=n;let M=Er();e.isSupported=typeof Ai=="function"&&typeof B=="function"&&v&&v.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:W,ERB_EXPR:se,TMPLIT_EXPR:_e,DATA_ATTR:ie,ARIA_ATTR:kn,IS_SCRIPT_OR_DATA:ye,ATTR_WHITESPACE:Fs,CUSTOM_ELEMENT:el}=Sr;let{IS_ALLOWED_URI:Us}=Sr,V=null;const Bs=D({},[...wr,...Bn,...Wn,...Hn,...xr]);let Z=null;const Ws=D({},[...vr,...zn,...Ar,...Ht]);let q=Object.seal(Si(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ot=null,Rn=null,Hs=!0,Nn=!0,zs=!1,qs=!0,qe=!1,Mt=!0,De=!1,On=!1,In=!1,Ge=!1,Lt=!1,$t=!1,Gs=!0,Xs=!1;const tl="user-content-";let Pn=!0,lt=!1,Xe={},Je=null;const Js=D({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ks=null;const Vs=D({},["audio","video","img","source","image","track"]);let jn=null;const Ys=D({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dt="http://www.w3.org/1998/Math/MathML",Ft="http://www.w3.org/2000/svg",Re="http://www.w3.org/1999/xhtml";let Ke=Re,Mn=!1,Ln=null;const nl=D({},[Dt,Ft,Re],Un);let Ut=D({},["mi","mo","mn","ms","mtext"]),Bt=D({},["annotation-xml"]);const sl=D({},["title","style","font","a","script"]);let ct=null;const rl=["application/xhtml+xml","text/html"],al="text/html";let Y=null,Ve=null;const il=t.createElement("form"),Qs=function(l){return l instanceof RegExp||l instanceof Function},$n=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ve&&Ve===l)){if((!l||typeof l!="object")&&(l={}),l=Pe(l),ct=rl.indexOf(l.PARSER_MEDIA_TYPE)===-1?al:l.PARSER_MEDIA_TYPE,Y=ct==="application/xhtml+xml"?Un:tn,V=ve(l,"ALLOWED_TAGS")?D({},l.ALLOWED_TAGS,Y):Bs,Z=ve(l,"ALLOWED_ATTR")?D({},l.ALLOWED_ATTR,Y):Ws,Ln=ve(l,"ALLOWED_NAMESPACES")?D({},l.ALLOWED_NAMESPACES,Un):nl,jn=ve(l,"ADD_URI_SAFE_ATTR")?D(Pe(Ys),l.ADD_URI_SAFE_ATTR,Y):Ys,Ks=ve(l,"ADD_DATA_URI_TAGS")?D(Pe(Vs),l.ADD_DATA_URI_TAGS,Y):Vs,Je=ve(l,"FORBID_CONTENTS")?D({},l.FORBID_CONTENTS,Y):Js,ot=ve(l,"FORBID_TAGS")?D({},l.FORBID_TAGS,Y):Pe({}),Rn=ve(l,"FORBID_ATTR")?D({},l.FORBID_ATTR,Y):Pe({}),Xe=ve(l,"USE_PROFILES")?l.USE_PROFILES:!1,Hs=l.ALLOW_ARIA_ATTR!==!1,Nn=l.ALLOW_DATA_ATTR!==!1,zs=l.ALLOW_UNKNOWN_PROTOCOLS||!1,qs=l.ALLOW_SELF_CLOSE_IN_ATTR!==!1,qe=l.SAFE_FOR_TEMPLATES||!1,Mt=l.SAFE_FOR_XML!==!1,De=l.WHOLE_DOCUMENT||!1,Ge=l.RETURN_DOM||!1,Lt=l.RETURN_DOM_FRAGMENT||!1,$t=l.RETURN_TRUSTED_TYPE||!1,In=l.FORCE_BODY||!1,Gs=l.SANITIZE_DOM!==!1,Xs=l.SANITIZE_NAMED_PROPS||!1,Pn=l.KEEP_CONTENT!==!1,lt=l.IN_PLACE||!1,Us=l.ALLOWED_URI_REGEXP||Ei,Ke=l.NAMESPACE||Re,Ut=l.MATHML_TEXT_INTEGRATION_POINTS||Ut,Bt=l.HTML_INTEGRATION_POINTS||Bt,q=l.CUSTOM_ELEMENT_HANDLING||{},l.CUSTOM_ELEMENT_HANDLING&&Qs(l.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=l.CUSTOM_ELEMENT_HANDLING.tagNameCheck),l.CUSTOM_ELEMENT_HANDLING&&Qs(l.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=l.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),l.CUSTOM_ELEMENT_HANDLING&&typeof l.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=l.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),qe&&(Nn=!1),Lt&&(Ge=!0),Xe&&(V=D({},xr),Z=[],Xe.html===!0&&(D(V,wr),D(Z,vr)),Xe.svg===!0&&(D(V,Bn),D(Z,zn),D(Z,Ht)),Xe.svgFilters===!0&&(D(V,Wn),D(Z,zn),D(Z,Ht)),Xe.mathMl===!0&&(D(V,Hn),D(Z,Ar),D(Z,Ht))),l.ADD_TAGS&&(V===Bs&&(V=Pe(V)),D(V,l.ADD_TAGS,Y)),l.ADD_ATTR&&(Z===Ws&&(Z=Pe(Z)),D(Z,l.ADD_ATTR,Y)),l.ADD_URI_SAFE_ATTR&&D(jn,l.ADD_URI_SAFE_ATTR,Y),l.FORBID_CONTENTS&&(Je===Js&&(Je=Pe(Je)),D(Je,l.FORBID_CONTENTS,Y)),Pn&&(V["#text"]=!0),De&&D(V,["html","head","body"]),V.table&&(D(V,["tbody"]),delete ot.tbody),l.TRUSTED_TYPES_POLICY){if(typeof l.TRUSTED_TYPES_POLICY.createHTML!="function")throw mt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof l.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw mt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=l.TRUSTED_TYPES_POLICY,_=N.createHTML("")}else N===void 0&&(N=Kl(m,r)),N!==null&&typeof _=="string"&&(_=N.createHTML(""));ce&&ce(l),Ve=l}},Zs=D({},[...Bn,...Wn,...Dl]),er=D({},[...Hn,...Fl]),ol=function(l){let g=B(l);(!g||!g.tagName)&&(g={namespaceURI:Ke,tagName:"template"});const S=tn(l.tagName),z=tn(g.tagName);return Ln[l.namespaceURI]?l.namespaceURI===Ft?g.namespaceURI===Re?S==="svg":g.namespaceURI===Dt?S==="svg"&&(z==="annotation-xml"||Ut[z]):!!Zs[S]:l.namespaceURI===Dt?g.namespaceURI===Re?S==="math":g.namespaceURI===Ft?S==="math"&&Bt[z]:!!er[S]:l.namespaceURI===Re?g.namespaceURI===Ft&&!Bt[z]||g.namespaceURI===Dt&&!Ut[z]?!1:!er[S]&&(sl[S]||!Zs[S]):!!(ct==="application/xhtml+xml"&&Ln[l.namespaceURI]):!1},Ee=function(l){ht(e.removed,{element:l});try{B(l).removeChild(l)}catch(g){A(l)}},Ye=function(l,g){try{ht(e.removed,{attribute:g.getAttributeNode(l),from:g})}catch(S){ht(e.removed,{attribute:null,from:g})}if(g.removeAttribute(l),l==="is")if(Ge||Lt)try{Ee(g)}catch(S){}else try{g.setAttribute(l,"")}catch(S){}},tr=function(l){let g=null,S=null;if(In)l="<remove></remove>"+l;else{const X=br(l,/^[\r\n\t ]+/);S=X&&X[0]}ct==="application/xhtml+xml"&&Ke===Re&&(l='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+l+"</body></html>");const z=N?N.createHTML(l):l;if(Ke===Re)try{g=new y().parseFromString(z,ct)}catch(X){}if(!g||!g.documentElement){g=v.createDocument(Ke,"template",null);try{g.documentElement.innerHTML=Mn?_:z}catch(X){}}const re=g.body||g.documentElement;return l&&S&&re.insertBefore(t.createTextNode(S),re.childNodes[0]||null),Ke===Re?j.call(g,De?"html":"body")[0]:De?g.documentElement:re},nr=function(l){return C.call(l.ownerDocument||l,l,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Dn=function(l){return l instanceof f&&(typeof l.nodeName!="string"||typeof l.textContent!="string"||typeof l.removeChild!="function"||!(l.attributes instanceof p)||typeof l.removeAttribute!="function"||typeof l.setAttribute!="function"||typeof l.namespaceURI!="string"||typeof l.insertBefore!="function"||typeof l.hasChildNodes!="function")},sr=function(l){return typeof c=="function"&&l instanceof c};function Ne(T,l,g){Wt(T,S=>{S.call(e,l,g,Ve)})}const rr=function(l){let g=null;if(Ne(M.beforeSanitizeElements,l,null),Dn(l))return Ee(l),!0;const S=Y(l.nodeName);if(Ne(M.uponSanitizeElement,l,{tagName:S,allowedTags:V}),Mt&&l.hasChildNodes()&&!sr(l.firstElementChild)&&oe(/<[/\w!]/g,l.innerHTML)&&oe(/<[/\w!]/g,l.textContent)||l.nodeType===gt.progressingInstruction||Mt&&l.nodeType===gt.comment&&oe(/<[/\w]/g,l.data))return Ee(l),!0;if(!V[S]||ot[S]){if(!ot[S]&&ir(S)&&(q.tagNameCheck instanceof RegExp&&oe(q.tagNameCheck,S)||q.tagNameCheck instanceof Function&&q.tagNameCheck(S)))return!1;if(Pn&&!Je[S]){const z=B(l)||l.parentNode,re=E(l)||l.childNodes;if(re&&z){const X=re.length;for(let de=X-1;de>=0;--de){const Oe=R(re[de],!0);Oe.__removalCount=(l.__removalCount||0)+1,z.insertBefore(Oe,U(l))}}}return Ee(l),!0}return l instanceof d&&!ol(l)||(S==="noscript"||S==="noembed"||S==="noframes")&&oe(/<\/no(script|embed|frames)/i,l.innerHTML)?(Ee(l),!0):(qe&&l.nodeType===gt.text&&(g=l.textContent,Wt([W,se,_e],z=>{g=ft(g,z," ")}),l.textContent!==g&&(ht(e.removed,{element:l.cloneNode()}),l.textContent=g)),Ne(M.afterSanitizeElements,l,null),!1)},ar=function(l,g,S){if(Gs&&(g==="id"||g==="name")&&(S in t||S in il))return!1;if(!(Nn&&!Rn[g]&&oe(ie,g))){if(!(Hs&&oe(kn,g))){if(!Z[g]||Rn[g]){if(!(ir(l)&&(q.tagNameCheck instanceof RegExp&&oe(q.tagNameCheck,l)||q.tagNameCheck instanceof Function&&q.tagNameCheck(l))&&(q.attributeNameCheck instanceof RegExp&&oe(q.attributeNameCheck,g)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(g))||g==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&oe(q.tagNameCheck,S)||q.tagNameCheck instanceof Function&&q.tagNameCheck(S))))return!1}else if(!jn[g]){if(!oe(Us,ft(S,Fs,""))){if(!((g==="src"||g==="xlink:href"||g==="href")&&l!=="script"&&jl(S,"data:")===0&&Ks[l])){if(!(zs&&!oe(ye,ft(S,Fs,"")))){if(S)return!1}}}}}}return!0},ir=function(l){return l!=="annotation-xml"&&br(l,el)},or=function(l){Ne(M.beforeSanitizeAttributes,l,null);const{attributes:g}=l;if(!g||Dn(l))return;const S={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Z,forceKeepAttr:void 0};let z=g.length;for(;z--;){const re=g[z],{name:X,namespaceURI:de,value:Oe}=re,ut=Y(X),Fn=Oe;let ae=X==="value"?Fn:Ml(Fn);if(S.attrName=ut,S.attrValue=ae,S.keepAttr=!0,S.forceKeepAttr=void 0,Ne(M.uponSanitizeAttribute,l,S),ae=S.attrValue,Xs&&(ut==="id"||ut==="name")&&(Ye(X,l),ae=tl+ae),Mt&&oe(/((--!?|])>)|<\/(style|title)/i,ae)){Ye(X,l);continue}if(S.forceKeepAttr)continue;if(!S.keepAttr){Ye(X,l);continue}if(!qs&&oe(/\/>/i,ae)){Ye(X,l);continue}qe&&Wt([W,se,_e],cr=>{ae=ft(ae,cr," ")});const lr=Y(l.nodeName);if(!ar(lr,ut,ae)){Ye(X,l);continue}if(N&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!de)switch(m.getAttributeType(lr,ut)){case"TrustedHTML":{ae=N.createHTML(ae);break}case"TrustedScriptURL":{ae=N.createScriptURL(ae);break}}if(ae!==Fn)try{de?l.setAttributeNS(de,X,ae):l.setAttribute(X,ae),Dn(l)?Ee(l):yr(e.removed)}catch(cr){Ye(X,l)}}Ne(M.afterSanitizeAttributes,l,null)},ll=function T(l){let g=null;const S=nr(l);for(Ne(M.beforeSanitizeShadowDOM,l,null);g=S.nextNode();)Ne(M.uponSanitizeShadowNode,g,null),rr(g),or(g),g.content instanceof a&&T(g.content);Ne(M.afterSanitizeShadowDOM,l,null)};return e.sanitize=function(T){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=null,S=null,z=null,re=null;if(Mn=!T,Mn&&(T="<!-->"),typeof T!="string"&&!sr(T))if(typeof T.toString=="function"){if(T=T.toString(),typeof T!="string")throw mt("dirty is not a string, aborting")}else throw mt("toString is not a function");if(!e.isSupported)return T;if(On||$n(l),e.removed=[],typeof T=="string"&&(lt=!1),lt){if(T.nodeName){const Oe=Y(T.nodeName);if(!V[Oe]||ot[Oe])throw mt("root node is forbidden and cannot be sanitized in-place")}}else if(T instanceof c)g=tr("<!---->"),S=g.ownerDocument.importNode(T,!0),S.nodeType===gt.element&&S.nodeName==="BODY"||S.nodeName==="HTML"?g=S:g.appendChild(S);else{if(!Ge&&!qe&&!De&&T.indexOf("<")===-1)return N&&$t?N.createHTML(T):T;if(g=tr(T),!g)return Ge?null:$t?_:""}g&&In&&Ee(g.firstChild);const X=nr(lt?T:g);for(;z=X.nextNode();)rr(z),or(z),z.content instanceof a&&ll(z.content);if(lt)return T;if(Ge){if(Lt)for(re=L.call(g.ownerDocument);g.firstChild;)re.appendChild(g.firstChild);else re=g;return(Z.shadowroot||Z.shadowrootmode)&&(re=$.call(n,re,!0)),re}let de=De?g.outerHTML:g.innerHTML;return De&&V["!doctype"]&&g.ownerDocument&&g.ownerDocument.doctype&&g.ownerDocument.doctype.name&&oe(Ci,g.ownerDocument.doctype.name)&&(de="<!DOCTYPE "+g.ownerDocument.doctype.name+">\n"+de),qe&&Wt([W,se,_e],Oe=>{de=ft(de,Oe," ")}),N&&$t?N.createHTML(de):de},e.setConfig=function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$n(T),On=!0},e.clearConfig=function(){Ve=null,On=!1},e.isValidAttribute=function(T,l,g){Ve||$n({});const S=Y(T),z=Y(l);return ar(S,z,g)},e.addHook=function(T,l){typeof l=="function"&&ht(M[T],l)},e.removeHook=function(T,l){if(l!==void 0){const g=Il(M[T],l);return g===-1?void 0:Pl(M[T],g,1)[0]}return yr(M[T])},e.removeHooks=function(T){M[T]=[]},e.removeAllHooks=function(){M=Er()},e}var Vl=Ti();const Cu=s=>typeof window>"u"?s:Vl.sanitize(s,{ALLOWED_TAGS:["p","br","strong","em","u","h1","h2","h3","h4","h5","h6","ul","ol","li","blockquote","a","img","div","span"],ALLOWED_ATTR:["href","target","src","alt","title","class"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i}),Yl=(s,e="_blank")=>{if(typeof window>"u")return;const t=document.createElement("a");t.href=s,t.target=e,t.rel="noopener noreferrer";try{const n=new URL(s);if(!["http:","https:","mailto:","tel:"].includes(n.protocol)){console.warn("Unsafe URL protocol detected:",n.protocol);return}t.click()}catch(n){console.error("Invalid URL:",s)}},Ql=()=>{const[s,e]=H.useState(0),[t,n]=H.useState(!1);return H.useEffect(()=>{const r=()=>{const a=window.scrollY,o=document.documentElement.scrollHeight-window.innerHeight,c=a/o*100;e(c),n(a>100)};return window.addEventListener("scroll",r),r(),()=>window.removeEventListener("scroll",r)},[]),i.jsxs(i.Fragment,{children:[i.jsx(Se.div,{className:"fixed top-0 left-0 h-1 bg-gradient-to-r from-primary via-accent to-secondary z-50",style:{width:"".concat(s,"%")},initial:{opacity:0},animate:{opacity:t?1:0},transition:{duration:.3}}),i.jsxs(Se.div,{className:"fixed bottom-8 right-8 z-40",initial:{scale:0,opacity:0},animate:{scale:t?1:0,opacity:t?1:0},transition:{duration:.3},children:[i.jsxs("div",{className:"relative w-12 h-12",children:[i.jsxs("svg",{className:"w-12 h-12 transform -rotate-90",children:[i.jsx("circle",{cx:"24",cy:"24",r:"20",stroke:"hsl(var(--muted))",strokeWidth:"2",fill:"transparent"}),i.jsx("circle",{cx:"24",cy:"24",r:"20",stroke:"url(#gradient)",strokeWidth:"2",fill:"transparent",strokeDasharray:"".concat(2*Math.PI*20),strokeDashoffset:"".concat(2*Math.PI*20*(1-s/100)),strokeLinecap:"round",className:"transition-all duration-300 ease-out"}),i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))"}),i.jsx("stop",{offset:"50%",stopColor:"hsl(var(--accent))"}),i.jsx("stop",{offset:"100%",stopColor:"hsl(var(--secondary))"})]})})]}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("span",{className:"text-xs font-medium text-foreground",children:[Math.round(s),"%"]})})]}),i.jsx(Se.button,{className:"absolute inset-0 rounded-full bg-card/80 backdrop-blur-sm border border-border hover:bg-card transition-colors",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),whileHover:{scale:1.1},whileTap:{scale:.95}})]})]})},Cr=gl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 relative overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",premium:"bg-gradient-to-r from-primary to-primary/80 text-white shadow-lg hover:shadow-xl hover:scale-[1.02] transform-gpu",glass:"bg-white/10 backdrop-blur-md border border-white/20 text-white shadow-lg hover:bg-white/20 hover:border-white/30",magnetic:"bg-primary text-primary-foreground shadow-md hover:shadow-lg transition-all duration-300 ease-out",shine:"bg-primary text-primary-foreground shadow-md relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/20 before:to-transparent before:translate-x-[-100%] hover:before:translate-x-[100%] before:transition-transform before:duration-700"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",xl:"h-12 rounded-lg px-10 text-base",icon:"h-9 w-9"},state:{default:"",loading:"cursor-not-allowed",success:"bg-green-600 text-white",error:"bg-red-600 text-white"}},defaultVariants:{variant:"default",size:"default",state:"default"}}),Fe=H.forwardRef(({className:s,variant:e,size:t,state:n,asChild:r=!1,loading:a=!1,loadingText:o,icon:c,iconPosition:d="left",disabled:h,children:p,onClick:f,...y},m)=>{const w=a||n==="loading",R=h||w,A=i.jsxs(i.Fragment,{children:[w&&i.jsx(es,{className:"h-4 w-4 animate-spin"}),!w&&c&&d==="left"&&c,i.jsx("span",{children:w?o||"Loading...":p}),!w&&c&&d==="right"&&c]});return r?i.jsx(ul,{ref:m,className:rt(Cr({variant:e,size:t,state:n,className:s})),onClick:f,...y,children:p}):i.jsx("button",{ref:m,className:rt(Cr({variant:e,size:t,state:n,className:s})),onClick:f,disabled:R,...y,children:A})});Fe.displayName="EnhancedButton";const Zl=()=>{const{t:s,language:e,setLanguage:t}=gs(),n=dl(),r=hl(),[a,o]=H.useState(!1),[c,d]=H.useState(null),[h,p]=H.useState(!1),[f,y]=H.useState(!1),[m,w]=H.useState(""),[R,A]=H.useState(!1),U=H.useRef(null),E=H.useRef(null),B=[{label:s("nav.products"),href:"/products",children:[{label:s("nav.cereals"),href:"/cereals"},{label:s("nav.oatJars"),href:"/oat-jars"},{label:s("nav.biscuits"),href:"/biscuits"}]},{label:s("nav.recipes"),href:"/recipes"},{label:s("nav.about"),href:"/about"},{label:s("nav.characters"),href:"/characters"},{label:s("nav.blog"),href:"/blog"}];H.useEffect(()=>{const v=()=>{const C=window.scrollY;p(C>10)};return window.addEventListener("scroll",v,{passive:!0}),()=>window.removeEventListener("scroll",v)},[]),H.useEffect(()=>{R&&E.current&&E.current.focus()},[R]),H.useEffect(()=>{const v=C=>{C.key==="Escape"?(o(!1),d(null),A(!1)):C.key==="/"&&C.metaKey&&(C.preventDefault(),A(!0))};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[]),H.useEffect(()=>{const v=C=>{U.current&&!U.current.contains(C.target)&&d(null)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const N=v=>{v.preventDefault(),m.trim()&&(r("/search?q=".concat(encodeURIComponent(m))),A(!1),w(""))},_=()=>{y(!f),document.documentElement.classList.toggle("dark")};return i.jsxs(i.Fragment,{children:[i.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary text-primary-foreground px-4 py-2 rounded-md z-50 transition-all duration-200",children:s("accessibility.skipToContent")}),i.jsxs(Se.header,{ref:U,className:rt("fixed top-0 w-full z-40 transition-all duration-300",h?"bg-background/95 backdrop-blur-md border-b border-border shadow-sm":"bg-transparent"),initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"},children:[i.jsx("nav",{className:"container mx-auto px-4",role:"navigation","aria-label":"Main navigation",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx(Se.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:i.jsxs(be,{to:"/",className:"flex items-center space-x-2 font-bold text-xl text-foreground hover:text-primary transition-colors duration-200","aria-label":s("brand.name"),children:[i.jsx("img",{src:"/logo.png",alt:"Kiddo logo",className:"h-14 md:h-16 w-auto transition-all duration-300",decoding:"async"}),i.jsx("span",{className:"sr-only",children:s("brand.name")})]})}),i.jsx("div",{className:"hidden lg:flex items-center space-x-8",children:B.map(v=>i.jsx("div",{className:"relative",children:v.children?i.jsxs("div",{onMouseEnter:()=>d(v.href),onMouseLeave:()=>d(null),children:[i.jsxs("button",{className:rt("flex items-center space-x-1 text-sm font-medium transition-colors duration-200 hover:text-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring rounded-sm px-2 py-1",n.pathname.startsWith(v.href)?"text-primary":"text-foreground/80"),"aria-expanded":c===v.href,"aria-haspopup":"true",children:[i.jsx("span",{children:v.label}),i.jsx(dr,{className:"h-4 w-4"})]}),i.jsx(dt,{children:c===v.href&&i.jsx(Se.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2,ease:"easeOut"},className:"absolute top-full left-0 mt-2 w-48 bg-background border border-border rounded-lg shadow-lg py-2 z-50",children:v.children.map(C=>i.jsxs(be,{to:C.href,className:"block px-4 py-2 text-sm text-foreground/80 hover:text-primary hover:bg-muted/50 transition-colors duration-200",onClick:()=>d(null),children:[C.label,C.badge&&i.jsx("span",{className:"ml-2 px-2 py-0.5 bg-primary text-primary-foreground text-xs rounded-full",children:C.badge})]},C.href))})})]}):i.jsx(be,{to:v.href,className:rt("text-sm font-medium transition-colors duration-200 hover:text-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring rounded-sm px-2 py-1",n.pathname===v.href?"text-primary":"text-foreground/80"),children:v.label})},v.href))}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Fe,{variant:"ghost",size:"icon",onClick:()=>A(!R),"aria-label":s("actions.search"),className:"hidden md:flex",children:i.jsx(hr,{className:"h-4 w-4"})}),i.jsx(dt,{children:R&&i.jsx(Se.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:300},exit:{opacity:0,width:0},transition:{duration:.3,ease:"easeOut"},className:"absolute right-0 top-full mt-2 overflow-hidden",children:i.jsxs("form",{onSubmit:N,className:"relative",children:[i.jsx("input",{ref:E,type:"text",value:m,onChange:v=>w(v.target.value),placeholder:s("actions.searchPlaceholder"),className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring text-sm"}),i.jsx("kbd",{className:"absolute right-3 top-1/2 -translate-y-1/2 px-2 py-0.5 bg-muted text-muted-foreground text-xs rounded",children:"⌘K"})]})})})]}),i.jsx("div",{className:"relative",children:i.jsxs(Fe,{variant:"ghost",size:"icon",onClick:()=>t(e==="en"?"ar":"en"),"aria-label":s("actions.changeLanguage"),className:"hidden sm:flex",children:[i.jsx(fr,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:e.toUpperCase()})]})}),i.jsx(Fe,{variant:"ghost",size:"icon",onClick:_,"aria-label":s("actions.toggleDarkMode"),className:"hidden sm:flex",children:f?i.jsx(mr,{className:"h-4 w-4"}):i.jsx(pr,{className:"h-4 w-4"})}),i.jsx(Fe,{variant:"ghost",size:"icon",onClick:()=>o(!a),"aria-label":s("actions.toggleMenu"),"aria-expanded":a,className:"lg:hidden",children:a?i.jsx(_s,{className:"h-5 w-5"}):i.jsx(_l,{className:"h-5 w-5"})})]})]})}),i.jsx(dt,{children:a&&i.jsx(Se.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"lg:hidden bg-background border-t border-border overflow-hidden",children:i.jsxs("div",{className:"container mx-auto px-4 py-4 space-y-4",children:[i.jsxs("form",{onSubmit:N,className:"relative md:hidden",children:[i.jsx("input",{type:"text",value:m,onChange:v=>w(v.target.value),placeholder:s("actions.searchPlaceholder"),className:"w-full px-4 py-2 bg-muted border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring text-sm"}),i.jsx(hr,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"})]}),i.jsx("div",{className:"space-y-2",children:B.map(v=>i.jsx("div",{children:v.children?i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>d(c===v.href?null:v.href),className:"flex items-center justify-between w-full px-3 py-2 text-sm font-medium text-foreground hover:text-primary hover:bg-muted/50 rounded-md transition-colors duration-200",children:[i.jsx("span",{children:v.label}),i.jsx(dr,{className:rt("h-4 w-4 transition-transform duration-200",c===v.href&&"rotate-180")})]}),i.jsx(dt,{children:c===v.href&&i.jsx(Se.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"ml-4 mt-2 space-y-2 overflow-hidden",children:v.children.map(C=>i.jsx(be,{to:C.href,className:"block px-3 py-2 text-sm text-foreground/80 hover:text-primary hover:bg-muted/50 rounded-md transition-colors duration-200",onClick:()=>{o(!1),d(null)},children:C.label},C.href))})})]}):i.jsx(be,{to:v.href,className:"block px-3 py-2 text-sm font-medium text-foreground hover:text-primary hover:bg-muted/50 rounded-md transition-colors duration-200",onClick:()=>o(!1),children:v.label})},v.href))}),i.jsxs("div",{className:"flex items-center space-x-4 pt-4 border-t border-border",children:[i.jsxs(Fe,{variant:"ghost",size:"sm",onClick:()=>t(e==="en"?"ar":"en"),className:"flex items-center space-x-2",children:[i.jsx(fr,{className:"h-4 w-4"}),i.jsx("span",{children:e.toUpperCase()})]}),i.jsxs(Fe,{variant:"ghost",size:"sm",onClick:_,className:"flex items-center space-x-2",children:[f?i.jsx(mr,{className:"h-4 w-4"}):i.jsx(pr,{className:"h-4 w-4"}),i.jsx("span",{children:s(f?"actions.lightMode":"actions.darkMode")})]})]})]})})})]}),i.jsx(dt,{children:a&&i.jsx(Se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-black/20 z-30 lg:hidden",onClick:()=>o(!1)})})]})};var ki={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Tr=$e.createContext&&$e.createContext(ki),ec=["attr","size","title"];function tc(s,e){if(s==null)return{};var t=nc(s,e),n,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);for(r=0;r<a.length;r++)n=a[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(t[n]=s[n])}return t}function nc(s,e){if(s==null)return{};var t={};for(var n in s)if(Object.prototype.hasOwnProperty.call(s,n)){if(e.indexOf(n)>=0)continue;t[n]=s[n]}return t}function hn(){return hn=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},hn.apply(this,arguments)}function kr(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function fn(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kr(Object(t),!0).forEach(function(n){sc(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):kr(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function sc(s,e,t){return e=rc(e),e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function rc(s){var e=ac(s,"string");return typeof e=="symbol"?e:e+""}function ac(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function Ri(s){return s&&s.map((e,t)=>$e.createElement(e.tag,fn({key:t},e.attr),Ri(e.child)))}function ic(s){return e=>$e.createElement(oc,hn({attr:fn({},s.attr)},e),Ri(s.child))}function oc(s){var e=t=>{var{attr:n,size:r,title:a}=s,o=tc(s,ec),c=r||t.size||"1em",d;return t.className&&(d=t.className),s.className&&(d=(d?d+" ":"")+s.className),$e.createElement("svg",hn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,o,{className:d,style:fn(fn({color:s.color||t.color},t.style),s.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),a&&$e.createElement("title",null,a),s.children)};return Tr!==void 0?$e.createElement(Tr.Consumer,null,t=>e(t)):e(ki)}function lc(s){return ic({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(s)}const cc=()=>{const s={company:[{name:"About Us",href:"/about"},{name:"Our Story",href:"/about"},{name:"Careers",href:"/careers"},{name:"Press",href:"/press"}],products:[{name:"Cereals",href:"/cereals"},{name:"Snacks",href:"/biscuits"},{name:"Beverages",href:"/oat-jars"},{name:"New Arrivals",href:"/products"}],support:[{name:"Contact Us",href:"/#contact"},{name:"FAQ",href:"/faq"},{name:"Nutrition Guide",href:"/nutrition"},{name:"Allergen Info",href:"/allergens"}],legal:[{name:"Privacy Policy",href:"/privacy"},{name:"Terms of Service",href:"/terms"},{name:"Cookie Policy",href:"/cookies"},{name:"Refund Policy",href:"/refunds"}]},e=[{icon:xl,href:"https://www.facebook.com/people/Kiddo-Arabia/100090897127132/?_rdr",label:"Facebook",color:"hover:text-blue-500"},{icon:vl,href:"https://www.instagram.com/kiddoarabia/",label:"Instagram",color:"hover:text-pink-500"},{icon:lc,href:"https://www.tiktok.com/@kiddoarabia_",label:"TikTok",color:"hover:text-black"},{icon:Al,href:"https://www.youtube.com/@KiddoArabia",label:"YouTube",color:"hover:text-red-500"}];return i.jsxs("footer",{className:"bg-foreground text-background",children:[i.jsx("div",{className:"border-b border-background/20",children:i.jsx("div",{className:"container mx-auto px-4 py-12",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[i.jsx("h3",{className:"text-2xl lg:text-3xl font-bold mb-4",children:"Stay Connected with Kiddo"}),i.jsx("p",{className:"text-background/80 mb-8 max-w-2xl mx-auto",children:"Get the latest updates on new products, special offers, parenting tips, and healthy recipes delivered straight to your inbox"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 max-w-md mx-auto",children:[i.jsx("input",{type:"email",placeholder:"Enter your email address",className:"flex-1 px-4 py-3 rounded-lg text-foreground bg-background border-0 focus:ring-2 focus:ring-primary outline-none"}),i.jsxs(ge,{variant:"kiddo",className:"px-8",onClick:()=>alert("Thank you for subscribing! We'll keep you updated with our latest news and offers."),children:[i.jsx(gr,{className:"h-4 w-4 mr-2"}),"Subscribe"]})]}),i.jsx("p",{className:"text-xs text-background/60 mt-4",children:"We respect your privacy. Unsubscribe at any time."})]})})}),i.jsx("div",{className:"container mx-auto px-4 py-16",children:i.jsxs("div",{className:"grid lg:grid-cols-6 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("img",{src:"/lovable-uploads/e560996b-c37d-4899-977d-d72bc3ef3ed0.png",alt:"Kiddo",className:"h-20 w-auto"})}),i.jsx("p",{className:"text-background/80 leading-relaxed max-w-md",children:"Nourishing young minds and bodies with love, care, and the finest natural ingredients. Building a healthier future, one meal at a time."}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(yl,{className:"h-4 w-4 text-primary flex-shrink-0"}),i.jsx("span",{className:"text-background/80",children:"Egypt Maadi"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(bl,{className:"h-4 w-4 text-primary flex-shrink-0"}),i.jsx("span",{className:"text-background/80",children:"01001000120"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(gr,{className:"h-4 w-4 text-primary flex-shrink-0"}),i.jsx("span",{className:"text-background/80",children:"info@s2cfood.com"})]})]}),i.jsx("div",{className:"flex gap-4",children:e.map((t,n)=>i.jsx(ge,{variant:"ghost",size:"icon",className:"bg-background/10 hover:bg-background/20 text-background ".concat(t.color," transition-all duration-300 hover:scale-110"),onClick:()=>Yl(t.href),children:i.jsx(t.icon,{className:"h-5 w-5"})},n))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-lg mb-6 text-background",children:"Company"}),i.jsx("ul",{className:"space-y-3",children:s.company.map((t,n)=>i.jsx("li",{children:i.jsx(be,{to:t.href,className:"text-background/80 hover:text-primary transition-colors duration-300 text-sm",children:t.name})},n))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-lg mb-6 text-background",children:"Products"}),i.jsx("ul",{className:"space-y-3",children:s.products.map((t,n)=>i.jsx("li",{children:i.jsx(be,{to:t.href,className:"text-background/80 hover:text-primary transition-colors duration-300 text-sm",children:t.name})},n))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-lg mb-6 text-background",children:"Support"}),i.jsx("ul",{className:"space-y-3",children:s.support.map((t,n)=>i.jsx("li",{children:i.jsx(be,{to:t.href,className:"text-background/80 hover:text-primary transition-colors duration-300 text-sm",children:t.name})},n))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-lg mb-6 text-background",children:"Legal"}),i.jsx("ul",{className:"space-y-3",children:s.legal.map((t,n)=>i.jsx("li",{children:i.jsx(be,{to:t.href,className:"text-background/80 hover:text-primary transition-colors duration-300 text-sm",children:t.name})},n))})]})]})}),i.jsx("div",{className:"border-t border-background/20",children:i.jsx("div",{className:"container mx-auto px-4 py-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-background/80",children:[i.jsx("span",{children:"© 2024 Kiddo Arabia. Made with"}),i.jsx(wl,{className:"h-4 w-4 text-primary animate-pulse"}),i.jsx("span",{children:"for healthy kids everywhere."})]}),i.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[i.jsx("span",{className:"text-background/60",children:"All rights reserved"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(be,{to:"/privacy",className:"text-background/80 hover:text-primary transition-colors",children:"Privacy"}),i.jsx(be,{to:"/terms",className:"text-background/80 hover:text-primary transition-colors",children:"Terms"}),i.jsx(be,{to:"/cookies",className:"text-background/80 hover:text-primary transition-colors",children:"Cookies"})]})]})]})})})]})};function O(s,e,t,n,r){if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,t),t}function u(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)}let Ni=function(){const{crypto:s}=globalThis;if(s!=null&&s.randomUUID)return Ni=s.randomUUID.bind(s),s.randomUUID();const e=new Uint8Array(1),t=s?()=>s.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^t()&15>>+n/4).toString(16))};function ss(s){return typeof s=="object"&&s!==null&&("name"in s&&s.name==="AbortError"||"message"in s&&String(s.message).includes("FetchRequestCanceledException"))}const rs=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null){try{if(Object.prototype.toString.call(s)==="[object Error]"){const e=new Error(s.message,s.cause?{cause:s.cause}:{});return s.stack&&(e.stack=s.stack),s.cause&&!e.cause&&(e.cause=s.cause),s.name&&(e.name=s.name),e}}catch(e){}try{return new Error(JSON.stringify(s))}catch(e){}}return new Error(s)};class I extends Error{}class ne extends I{constructor(e,t,n,r){super("".concat(ne.makeMessage(e,t,n))),this.status=e,this.headers=r,this.requestID=r==null?void 0:r.get("x-request-id"),this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,n){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?"".concat(e," ").concat(r):e?"".concat(e," status code (no body)"):r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new xn({message:n,cause:rs(t)});const a=t==null?void 0:t.error;return e===400?new Oi(e,a,n,r):e===401?new Ii(e,a,n,r):e===403?new Pi(e,a,n,r):e===404?new ji(e,a,n,r):e===409?new Mi(e,a,n,r):e===422?new Li(e,a,n,r):e===429?new $i(e,a,n,r):e>=500?new Di(e,a,n,r):new ne(e,a,n,r)}}class we extends ne{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class xn extends ne{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class ys extends xn{constructor({message:e}={}){super({message:e!=null?e:"Request timed out."})}}class Oi extends ne{}class Ii extends ne{}class Pi extends ne{}class ji extends ne{}class Mi extends ne{}class Li extends ne{}class $i extends ne{}class Di extends ne{}class Fi extends I{constructor(){super("Could not parse response content as the length limit was reached")}}class Ui extends I{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class yt extends Error{constructor(e){super(e)}}const uc=/^[a-z][a-z0-9+.-]*:/i,dc=s=>uc.test(s);let he=s=>(he=Array.isArray,he(s)),Rr=he;function hc(s){return typeof s!="object"?{}:s!=null?s:{}}function fc(s){if(!s)return!0;for(const e in s)return!1;return!0}function mc(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function qn(s){return s!=null&&typeof s=="object"&&!Array.isArray(s)}const pc=(s,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new I("".concat(s," must be an integer"));if(e<0)throw new I("".concat(s," must be a positive integer"));return e},gc=s=>{try{return JSON.parse(s)}catch(e){return}},Ot=s=>new Promise(e=>setTimeout(e,s)),tt="5.11.0",_c=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function yc(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const bc=()=>{var t,n,r,a,o;const s=yc();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tt,"X-Stainless-OS":Or(Deno.build.os),"X-Stainless-Arch":Nr(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(n=(t=Deno.version)==null?void 0:t.deno)!=null?n:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"other:".concat(EdgeRuntime),"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tt,"X-Stainless-OS":Or((r=globalThis.process.platform)!=null?r:"unknown"),"X-Stainless-Arch":Nr((a=globalThis.process.arch)!=null?a:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!=null?o:"unknown"};const e=wc();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"browser:".concat(e.browser),"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function wc(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of s){const n=t.exec(navigator.userAgent);if(n){const r=n[1]||0,a=n[2]||0,o=n[3]||0;return{browser:e,version:"".concat(r,".").concat(a,".").concat(o)}}}return null}const Nr=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?"other:".concat(s):"unknown",Or=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?"Other:".concat(s):"Unknown");let zt;const xc=()=>zt!=null?zt:zt=bc();function vc(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Bi(...s){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...s)}function Wi(s){let e=Symbol.asyncIterator in s?s[Symbol.asyncIterator]():s[Symbol.iterator]();return Bi({start(){},async pull(t){const{done:n,value:r}=await e.next();n?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)==null?void 0:t.call(e))}})}function Hi(s){if(s[Symbol.asyncIterator])return s;const e=s.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Ac(s){var n,r;if(s===null||typeof s!="object")return;if(s[Symbol.asyncIterator]){await((r=(n=s[Symbol.asyncIterator]()).return)==null?void 0:r.call(n));return}const e=s.getReader(),t=e.cancel();e.releaseLock(),await t}const Sc=({headers:s,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),zi="RFC3986",qi=s=>String(s),Ir={RFC1738:s=>String(s).replace(/%20/g,"+"),RFC3986:qi},Ec="RFC1738";let as=(s,e)=>{var t;return as=(t=Object.hasOwn)!=null?t:Function.prototype.call.bind(Object.prototype.hasOwnProperty),as(s,e)};const Ce=(()=>{const s=[];for(let e=0;e<256;++e)s.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return s})(),Gn=1024,Cc=(s,e,t,n,r)=>{if(s.length===0)return s;let a=s;if(typeof s=="symbol"?a=Symbol.prototype.toString.call(s):typeof s!="string"&&(a=String(s)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let o="";for(let c=0;c<a.length;c+=Gn){const d=a.length>=Gn?a.slice(c,c+Gn):a,h=[];for(let p=0;p<d.length;++p){let f=d.charCodeAt(p);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||r===Ec&&(f===40||f===41)){h[h.length]=d.charAt(p);continue}if(f<128){h[h.length]=Ce[f];continue}if(f<2048){h[h.length]=Ce[192|f>>6]+Ce[128|f&63];continue}if(f<55296||f>=57344){h[h.length]=Ce[224|f>>12]+Ce[128|f>>6&63]+Ce[128|f&63];continue}p+=1,f=65536+((f&1023)<<10|d.charCodeAt(p)&1023),h[h.length]=Ce[240|f>>18]+Ce[128|f>>12&63]+Ce[128|f>>6&63]+Ce[128|f&63]}o+=h.join("")}return o};function Tc(s){return!s||typeof s!="object"?!1:!!(s.constructor&&s.constructor.isBuffer&&s.constructor.isBuffer(s))}function Pr(s,e){if(he(s)){const t=[];for(let n=0;n<s.length;n+=1)t.push(e(s[n]));return t}return e(s)}const Gi={brackets(s){return String(s)+"[]"},comma:"comma",indices(s,e){return String(s)+"["+e+"]"},repeat(s){return String(s)}},Xi=function(s,e){Array.prototype.push.apply(s,he(e)?e:[e])};let qt;const K={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Cc,encodeValuesOnly:!1,format:zi,formatter:qi,indices:!1,serializeDate(s){return(qt!=null?qt:qt=Function.prototype.call.bind(Date.prototype.toISOString))(s)},skipNulls:!1,strictNullHandling:!1};function kc(s){return typeof s=="string"||typeof s=="number"||typeof s=="boolean"||typeof s=="symbol"||typeof s=="bigint"}const Xn={};function Ji(s,e,t,n,r,a,o,c,d,h,p,f,y,m,w,R,A,U){let E=s,B=U,N=0,_=!1;for(;(B=B.get(Xn))!==void 0&&!_;){const $=B.get(s);if(N+=1,typeof $<"u"){if($===N)throw new RangeError("Cyclic object value");_=!0}typeof B.get(Xn)>"u"&&(N=0)}if(typeof h=="function"?E=h(e,E):E instanceof Date?E=y==null?void 0:y(E):t==="comma"&&he(E)&&(E=Pr(E,function($){return $ instanceof Date?y==null?void 0:y($):$})),E===null){if(a)return d&&!R?d(e,K.encoder,A,"key",m):e;E=""}if(kc(E)||Tc(E)){if(d){const $=R?e:d(e,K.encoder,A,"key",m);return[(w==null?void 0:w($))+"="+(w==null?void 0:w(d(E,K.encoder,A,"value",m)))]}return[(w==null?void 0:w(e))+"="+(w==null?void 0:w(String(E)))]}const v=[];if(typeof E>"u")return v;let C;if(t==="comma"&&he(E))R&&d&&(E=Pr(E,d)),C=[{value:E.length>0?E.join(",")||null:void 0}];else if(he(h))C=h;else{const $=Object.keys(E);C=p?$.sort(p):$}const L=c?String(e).replace(/\./g,"%2E"):String(e),j=n&&he(E)&&E.length===1?L+"[]":L;if(r&&he(E)&&E.length===0)return j+"[]";for(let $=0;$<C.length;++$){const M=C[$],W=typeof M=="object"&&typeof M.value<"u"?M.value:E[M];if(o&&W===null)continue;const se=f&&c?M.replace(/\./g,"%2E"):M,_e=he(E)?typeof t=="function"?t(j,se):j:j+(f?"."+se:"["+se+"]");U.set(s,N);const ie=new WeakMap;ie.set(Xn,U),Xi(v,Ji(W,_e,t,n,r,a,o,c,t==="comma"&&R&&he(E)?null:d,h,p,f,y,m,w,R,A,ie))}return v}function Rc(s=K){if(typeof s.allowEmptyArrays<"u"&&typeof s.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof s.encodeDotInKeys<"u"&&typeof s.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(s.encoder!==null&&typeof s.encoder<"u"&&typeof s.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=s.charset||K.charset;if(typeof s.charset<"u"&&s.charset!=="utf-8"&&s.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=zi;if(typeof s.format<"u"){if(!as(Ir,s.format))throw new TypeError("Unknown format option provided.");t=s.format}const n=Ir[t];let r=K.filter;(typeof s.filter=="function"||he(s.filter))&&(r=s.filter);let a;if(s.arrayFormat&&s.arrayFormat in Gi?a=s.arrayFormat:"indices"in s?a=s.indices?"indices":"repeat":a=K.arrayFormat,"commaRoundTrip"in s&&typeof s.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof s.allowDots>"u"?s.encodeDotInKeys?!0:K.allowDots:!!s.allowDots;return{addQueryPrefix:typeof s.addQueryPrefix=="boolean"?s.addQueryPrefix:K.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof s.allowEmptyArrays=="boolean"?!!s.allowEmptyArrays:K.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof s.charsetSentinel=="boolean"?s.charsetSentinel:K.charsetSentinel,commaRoundTrip:!!s.commaRoundTrip,delimiter:typeof s.delimiter>"u"?K.delimiter:s.delimiter,encode:typeof s.encode=="boolean"?s.encode:K.encode,encodeDotInKeys:typeof s.encodeDotInKeys=="boolean"?s.encodeDotInKeys:K.encodeDotInKeys,encoder:typeof s.encoder=="function"?s.encoder:K.encoder,encodeValuesOnly:typeof s.encodeValuesOnly=="boolean"?s.encodeValuesOnly:K.encodeValuesOnly,filter:r,format:t,formatter:n,serializeDate:typeof s.serializeDate=="function"?s.serializeDate:K.serializeDate,skipNulls:typeof s.skipNulls=="boolean"?s.skipNulls:K.skipNulls,sort:typeof s.sort=="function"?s.sort:null,strictNullHandling:typeof s.strictNullHandling=="boolean"?s.strictNullHandling:K.strictNullHandling}}function Nc(s,e={}){let t=s;const n=Rc(e);let r,a;typeof n.filter=="function"?(a=n.filter,t=a("",t)):he(n.filter)&&(a=n.filter,r=a);const o=[];if(typeof t!="object"||t===null)return"";const c=Gi[n.arrayFormat],d=c==="comma"&&n.commaRoundTrip;r||(r=Object.keys(t)),n.sort&&r.sort(n.sort);const h=new WeakMap;for(let y=0;y<r.length;++y){const m=r[y];n.skipNulls&&t[m]===null||Xi(o,Ji(t[m],m,c,d,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,h))}const p=o.join(n.delimiter);let f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),p.length>0?f+p:""}function Oc(s){let e=0;for(const r of s)e+=r.length;const t=new Uint8Array(e);let n=0;for(const r of s)t.set(r,n),n+=r.length;return t}let Gt;function bs(s){let e;return(Gt!=null?Gt:(e=new globalThis.TextEncoder,Gt=e.encode.bind(e)))(s)}let Xt;function jr(s){let e;return(Xt!=null?Xt:(e=new globalThis.TextDecoder,Xt=e.decode.bind(e)))(s)}var fe,me;class vn{constructor(){fe.set(this,void 0),me.set(this,void 0),O(this,fe,new Uint8Array),O(this,me,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?bs(e):e;O(this,fe,Oc([u(this,fe,"f"),t]));const n=[];let r;for(;(r=Ic(u(this,fe,"f"),u(this,me,"f")))!=null;){if(r.carriage&&u(this,me,"f")==null){O(this,me,r.index);continue}if(u(this,me,"f")!=null&&(r.index!==u(this,me,"f")+1||r.carriage)){n.push(jr(u(this,fe,"f").subarray(0,u(this,me,"f")-1))),O(this,fe,u(this,fe,"f").subarray(u(this,me,"f"))),O(this,me,null);continue}const a=u(this,me,"f")!==null?r.preceding-1:r.preceding,o=jr(u(this,fe,"f").subarray(0,a));n.push(o),O(this,fe,u(this,fe,"f").subarray(r.index)),O(this,me,null)}return n}flush(){return u(this,fe,"f").length?this.decode("\n"):[]}}fe=new WeakMap,me=new WeakMap;vn.NEWLINE_CHARS=new Set(["\n","\r"]);vn.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Ic(s,e){for(let r=e!=null?e:0;r<s.length;r++){if(s[r]===10)return{preceding:r,index:r+1,carriage:!1};if(s[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Pc(s){for(let n=0;n<s.length-1;n++){if(s[n]===10&&s[n+1]===10||s[n]===13&&s[n+1]===13)return n+2;if(s[n]===13&&s[n+1]===10&&n+3<s.length&&s[n+2]===13&&s[n+3]===10)return n+4}return-1}const mn={off:0,error:200,warn:300,info:400,debug:500},Mr=(s,e,t)=>{if(s){if(mc(mn,s))return s;ee(t).warn("".concat(e," was set to ").concat(JSON.stringify(s),", expected one of ").concat(JSON.stringify(Object.keys(mn))))}};function bt(){}function Jt(s,e,t){return!e||mn[s]>mn[t]?bt:e[s].bind(e)}const jc={error:bt,warn:bt,info:bt,debug:bt};let Lr=new WeakMap;function ee(s){var a;const e=s.logger,t=(a=s.logLevel)!=null?a:"off";if(!e)return jc;const n=Lr.get(e);if(n&&n[0]===t)return n[1];const r={error:Jt("error",e,t),warn:Jt("warn",e,t),info:Jt("info",e,t),debug:Jt("debug",e,t)};return Lr.set(e,[t,r]),r}const Ue=s=>(s.options&&(s.options={...s.options},delete s.options.headers),s.headers&&(s.headers=Object.fromEntries((s.headers instanceof Headers?[...s.headers]:Object.entries(s.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in s&&(s.retryOfRequestLogID&&(s.retryOf=s.retryOfRequestLogID),delete s.retryOfRequestLogID),s);var _t;class ke{constructor(e,t,n){this.iterator=e,_t.set(this,void 0),this.controller=t,O(this,_t,n)}static fromSSEResponse(e,t,n){let r=!1;const a=n?ee(n):console;async function*o(){if(r)throw new I("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const d of Mc(e,t))if(!c){if(d.data.startsWith("[DONE]")){c=!0;continue}if(d.event===null||!d.event.startsWith("thread.")){let h;try{h=JSON.parse(d.data)}catch(p){throw a.error("Could not parse message into JSON:",d.data),a.error("From chunk:",d.raw),p}if(h&&h.error)throw new ne(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(d.data)}catch(p){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),p}if(d.event=="error")throw new ne(void 0,h.error,h.message,void 0);yield{event:d.event,data:h}}}c=!0}catch(d){if(ss(d))return;throw d}finally{c||t.abort()}}return new ke(o,t,n)}static fromReadableStream(e,t,n){let r=!1;async function*a(){const c=new vn,d=Hi(e);for await(const h of d)for(const p of c.decode(h))yield p;for(const h of c.flush())yield h}async function*o(){if(r)throw new I("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const d of a())c||d&&(yield JSON.parse(d));c=!0}catch(d){if(ss(d))return;throw d}finally{c||t.abort()}}return new ke(o,t,n)}[(_t=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=a=>({next:()=>{if(a.length===0){const o=n.next();e.push(o),t.push(o)}return a.shift()}});return[new ke(()=>r(e),this.controller,u(this,_t,"f")),new ke(()=>r(t),this.controller,u(this,_t,"f"))]}toReadableStream(){const e=this;let t;return Bi({async start(){t=e[Symbol.asyncIterator]()},async pull(n){try{const{value:r,done:a}=await t.next();if(a)return n.close();const o=bs(JSON.stringify(r)+"\n");n.enqueue(o)}catch(r){n.error(r)}},async cancel(){var n;await((n=t.return)==null?void 0:n.call(t))}})}}async function*Mc(s,e){if(!s.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new I("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new I("Attempted to iterate over a response with no body");const t=new $c,n=new vn,r=Hi(s.body);for await(const a of Lc(r))for(const o of n.decode(a)){const c=t.decode(o);c&&(yield c)}for(const a of n.flush()){const o=t.decode(a);o&&(yield o)}}async function*Lc(s){let e=new Uint8Array;for await(const t of s){if(t==null)continue;const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?bs(t):t;let r=new Uint8Array(e.length+n.length);r.set(e),r.set(n,e.length),e=r;let a;for(;(a=Pc(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class $c{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=Dc(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function Dc(s,e){const t=s.indexOf(e);return t!==-1?[s.substring(0,t),e,s.substring(t+e.length)]:[s,"",""]}async function Ki(s,e){const{response:t,requestLogID:n,retryOfRequestLogID:r,startTime:a}=e,o=await(async()=>{var f;if(e.options.stream)return ee(s).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,s):ke.fromSSEResponse(t,e.controller,s);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const c=t.headers.get("content-type"),d=(f=c==null?void 0:c.split(";")[0])==null?void 0:f.trim();if((d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))){const y=await t.json();return Vi(y,t)}return await t.text()})();return ee(s).debug("[".concat(n,"] response parsed"),Ue({retryOfRequestLogID:r,url:t.url,status:t.status,body:o,durationMs:Date.now()-a})),o}function Vi(s,e){return!s||typeof s!="object"||Array.isArray(s)?s:Object.defineProperty(s,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var wt;class An extends Promise{constructor(e,t,n=Ki){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n,wt.set(this,void 0),O(this,wt,e)}_thenUnwrap(e){return new An(u(this,wt,"f"),this.responsePromise,async(t,n)=>Vi(e(await this.parseResponse(t,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(u(this,wt,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}wt=new WeakMap;var Kt;class Yi{constructor(e,t,n,r){Kt.set(this,void 0),O(this,Kt,e),this.options=r,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new I("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await u(this,Kt,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Kt=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Fc extends An{constructor(e,t,n){super(e,t,async(r,a)=>new n(r,a.response,await Ki(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class Sn extends Yi{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}nextPageRequestOptions(){return null}}class G extends Yi{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var n;const e=this.getPaginatedItems(),t=(n=e[e.length-1])==null?void 0:n.id;return t?{...this.options,query:{...hc(this.options.query),after:t}}:null}}const Qi=()=>{var s;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((s=e==null?void 0:e.versions)==null?void 0:s.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Tt(s,e,t){return Qi(),new File(s,e!=null?e:"unknown_file",t)}function nn(s){return(typeof s=="object"&&s!==null&&("name"in s&&s.name&&String(s.name)||"url"in s&&s.url&&String(s.url)||"filename"in s&&s.filename&&String(s.filename)||"path"in s&&s.path&&String(s.path))||"").split(/[\\/]/).pop()||void 0}const Zi=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",ze=async(s,e)=>({...s,body:await Bc(s.body,e)}),$r=new WeakMap;function Uc(s){const e=typeof s=="function"?s:s.fetch,t=$r.get(e);if(t)return t;const n=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch(r){return!0}})();return $r.set(e,n),n}const Bc=async(s,e)=>{if(!await Uc(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(s||{}).map(([n,r])=>is(t,n,r))),t},Wc=s=>s instanceof Blob&&"name"in s,is=async(s,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError('Received null for "'.concat(e,"\"; to pass null in FormData, you must use the string 'null'"));if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")s.append(e,String(t));else if(t instanceof Response)s.append(e,Tt([await t.blob()],nn(t)));else if(Zi(t))s.append(e,Tt([await new Response(Wi(t)).blob()],nn(t)));else if(Wc(t))s.append(e,t,nn(t));else if(Array.isArray(t))await Promise.all(t.map(n=>is(s,e+"[]",n)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([n,r])=>is(s,"".concat(e,"[").concat(n,"]"),r)));else throw new TypeError("Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ".concat(t," instead"))}},eo=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",Hc=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&eo(s),zc=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function";async function qc(s,e,t){if(Qi(),s=await s,Hc(s))return s instanceof File?s:Tt([await s.arrayBuffer()],s.name);if(zc(s)){const r=await s.blob();return e||(e=new URL(s.url).pathname.split(/[\\/]/).pop()),Tt(await os(r),e,t)}const n=await os(s);if(e||(e=nn(s)),!(t!=null&&t.type)){const r=n.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t={...t,type:r})}return Tt(n,e,t)}async function os(s){var t;let e=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)e.push(s);else if(eo(s))e.push(s instanceof Blob?s:await s.arrayBuffer());else if(Zi(s))for await(const n of s)e.push(...await os(n));else{const n=(t=s==null?void 0:s.constructor)==null?void 0:t.name;throw new Error("Unexpected data type: ".concat(typeof s).concat(n?"; constructor: ".concat(n):"").concat(Gc(s)))}return e}function Gc(s){if(typeof s!="object"||s===null)return"";const e=Object.getOwnPropertyNames(s);return"; props: [".concat(e.map(t=>'"'.concat(t,'"')).join(", "),"]")}class P{constructor(e){this._client=e}}function to(s){return s.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Dr=Object.freeze(Object.create(null)),Xc=(s=to)=>function(t,...n){if(t.length===1)return t[0];let r=!1;const a=[],o=t.reduce((p,f,y)=>{var R,A,U;/[?#]/.test(f)&&(r=!0);const m=n[y];let w=(r?encodeURIComponent:s)(""+m);return y!==n.length&&(m==null||typeof m=="object"&&m.toString===((U=Object.getPrototypeOf((A=Object.getPrototypeOf((R=m.hasOwnProperty)!=null?R:Dr))!=null?A:Dr))==null?void 0:U.toString))&&(w=m+"",a.push({start:p.length+f.length,length:w.length,error:"Value of type ".concat(Object.prototype.toString.call(m).slice(8,-1)," is not a valid path parameter")})),p+f+(y===n.length?"":w)},""),c=o.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=d.exec(c))!==null;)a.push({start:h.index,length:h[0].length,error:'Value "'.concat(h[0],"\" can't be safely passed as a path parameter")});if(a.sort((p,f)=>p.start-f.start),a.length>0){let p=0;const f=a.reduce((y,m)=>{const w=" ".repeat(m.start-p),R="^".repeat(m.length);return p=m.start+m.length,y+w+R},"");throw new I("Path parameters result in path with invalid segments:\n".concat(a.map(y=>y.error).join("\n"),"\n").concat(o,"\n").concat(f))}return o},x=Xc(to);var Qr;let no=class extends P{list(e,t={},n){return this._client.getAPIList(x(Qr||(Qr=b(["/chat/completions/","/messages"])),e),G,{query:t,...n})}};function Jc(s){return typeof s.parse=="function"}const pn=s=>(s==null?void 0:s.role)==="assistant",so=s=>(s==null?void 0:s.role)==="tool";var ls,sn,rn,xt,vt,an,At,je,St,gn,_n,nt,ro;class ws{constructor(){ls.add(this),this.controller=new AbortController,sn.set(this,void 0),rn.set(this,()=>{}),xt.set(this,()=>{}),vt.set(this,void 0),an.set(this,()=>{}),At.set(this,()=>{}),je.set(this,{}),St.set(this,!1),gn.set(this,!1),_n.set(this,!1),nt.set(this,!1),O(this,sn,new Promise((e,t)=>{O(this,rn,e,"f"),O(this,xt,t,"f")})),O(this,vt,new Promise((e,t)=>{O(this,an,e,"f"),O(this,At,t,"f")})),u(this,sn,"f").catch(()=>{}),u(this,vt,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},u(this,ls,"m",ro).bind(this))},0)}_connected(){this.ended||(u(this,rn,"f").call(this),this._emit("connect"))}get ended(){return u(this,St,"f")}get errored(){return u(this,gn,"f")}get aborted(){return u(this,_n,"f")}abort(){this.controller.abort()}on(e,t){return(u(this,je,"f")[e]||(u(this,je,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=u(this,je,"f")[e];if(!n)return this;const r=n.findIndex(a=>a.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(u(this,je,"f")[e]||(u(this,je,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{O(this,nt,!0),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){O(this,nt,!0),await u(this,vt,"f")}_emit(e,...t){if(u(this,St,"f"))return;e==="end"&&(O(this,St,!0),u(this,an,"f").call(this));const n=u(this,je,"f")[e];if(n&&(u(this,je,"f")[e]=n.filter(r=>!r.once),n.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!u(this,nt,"f")&&!(n!=null&&n.length)&&Promise.reject(r),u(this,xt,"f").call(this,r),u(this,At,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!u(this,nt,"f")&&!(n!=null&&n.length)&&Promise.reject(r),u(this,xt,"f").call(this,r),u(this,At,"f").call(this,r),this._emit("end")}}_emitFinal(){}}sn=new WeakMap,rn=new WeakMap,xt=new WeakMap,vt=new WeakMap,an=new WeakMap,At=new WeakMap,je=new WeakMap,St=new WeakMap,gn=new WeakMap,_n=new WeakMap,nt=new WeakMap,ls=new WeakSet,ro=function(e){if(O(this,gn,!0),e instanceof Error&&e.name==="AbortError"&&(e=new we),e instanceof we)return O(this,_n,!0),this._emit("abort",e);if(e instanceof I)return this._emit("error",e);if(e instanceof Error){const t=new I(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new I(String(e)))};function xs(s){return(s==null?void 0:s.$brand)==="auto-parseable-response-format"}function It(s){return(s==null?void 0:s.$brand)==="auto-parseable-tool"}function Kc(s,e){return!e||!ao(e)?{...s,choices:s.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:vs(s,e)}function vs(s,e){const t=s.choices.map(n=>{var r,a;if(n.finish_reason==="length")throw new Fi;if(n.finish_reason==="content_filter")throw new Ui;return{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:(a=(r=n.message.tool_calls)==null?void 0:r.map(o=>Yc(e,o)))!=null?a:void 0}:void 0,parsed:n.message.content&&!n.message.refusal?Vc(e,n.message.content):null}}});return{...s,choices:t}}function Vc(s,e){var t,n;return((t=s.response_format)==null?void 0:t.type)!=="json_schema"?null:((n=s.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in s.response_format?s.response_format.$parseRaw(e):JSON.parse(e):null}function Yc(s,e){var n;const t=(n=s.tools)==null?void 0:n.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:It(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function Qc(s,e){var n;if(!s)return!1;const t=(n=s.tools)==null?void 0:n.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return It(t)||(t==null?void 0:t.function.strict)||!1}function ao(s){var e,t;return xs(s.response_format)?!0:(t=(e=s.tools)==null?void 0:e.some(n=>It(n)||n.type==="function"&&n.function.strict===!0))!=null?t:!1}function Zc(s){for(const e of s!=null?s:[]){if(e.type!=="function")throw new I("Currently only `function` tool types support auto-parsing; Received `".concat(e.type,"`"));if(e.function.strict!==!0)throw new I("The `".concat(e.function.name,"` tool is not marked with `strict: true`. Only strict function tools can be auto-parsed"))}}var le,cs,yn,us,ds,hs,io,oo;const eu=10;class lo extends ws{constructor(){super(...arguments),le.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(n=e.choices[0])==null?void 0:n.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),so(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(pn(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionToolCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new I("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),u(this,le,"m",cs).call(this)}async finalMessage(){return await this.done(),u(this,le,"m",yn).call(this)}async finalFunctionToolCall(){return await this.done(),u(this,le,"m",us).call(this)}async finalFunctionToolCallResult(){return await this.done(),u(this,le,"m",ds).call(this)}async totalUsage(){return await this.done(),u(this,le,"m",hs).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=u(this,le,"m",yn).call(this);t&&this._emit("finalMessage",t);const n=u(this,le,"m",cs).call(this);n&&this._emit("finalContent",n);const r=u(this,le,"m",us).call(this);r&&this._emit("finalFunctionToolCall",r);const a=u(this,le,"m",ds).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",u(this,le,"m",hs).call(this))}async _createChatCompletion(e,t,n){const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),u(this,le,"m",io).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(vs(a,t))}async _runChatCompletion(e,t,n){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,n)}async _runTools(e,t,n){var m,w,R;const r="tool",{tool_choice:a="auto",stream:o,...c}=t,d=typeof a!="string"&&((m=a==null?void 0:a.function)==null?void 0:m.name),{maxChatCompletions:h=eu}=n||{},p=t.tools.map(A=>{if(It(A)){if(!A.$callback)throw new I("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:A.$callback,name:A.function.name,description:A.function.description||"",parameters:A.function.parameters,parse:A.$parseRaw,strict:!0}}}return A}),f={};for(const A of p)A.type==="function"&&(f[A.function.name||A.function.function.name]=A.function);const y="tools"in t?p.map(A=>A.type==="function"?{type:"function",function:{name:A.function.name||A.function.function.name,parameters:A.function.parameters,description:A.function.description,strict:A.function.strict}}:A):void 0;for(const A of t.messages)this._addMessage(A,!1);for(let A=0;A<h;++A){const E=(w=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:y,messages:[...this.messages]},n)).choices[0])==null?void 0:w.message;if(!E)throw new I("missing message in ChatCompletion response");if(!((R=E.tool_calls)!=null&&R.length))return;for(const B of E.tool_calls){if(B.type!=="function")continue;const N=B.id,{name:_,arguments:v}=B.function,C=f[_];if(C){if(d&&d!==_){const M="Invalid tool_call: ".concat(JSON.stringify(_),". ").concat(JSON.stringify(d)," requested. Please try again");this._addMessage({role:r,tool_call_id:N,content:M});continue}}else{const M="Invalid tool_call: ".concat(JSON.stringify(_),". Available options are: ").concat(Object.keys(f).map(W=>JSON.stringify(W)).join(", "),". Please try again");this._addMessage({role:r,tool_call_id:N,content:M});continue}let L;try{L=Jc(C)?await C.parse(v):v}catch(M){const W=M instanceof Error?M.message:String(M);this._addMessage({role:r,tool_call_id:N,content:W});continue}const j=await C.function(L,this),$=u(this,le,"m",oo).call(this,j);if(this._addMessage({role:r,tool_call_id:N,content:$}),d)return}}}}le=new WeakSet,cs=function(){var e;return(e=u(this,le,"m",yn).call(this).content)!=null?e:null},yn=function(){var t,n;let e=this.messages.length;for(;e-- >0;){const r=this.messages[e];if(pn(r))return{...r,content:(t=r.content)!=null?t:null,refusal:(n=r.refusal)!=null?n:null}}throw new I("stream ended without producing a ChatCompletionMessage with role=assistant")},us=function(){var e,t;for(let n=this.messages.length-1;n>=0;n--){const r=this.messages[n];if(pn(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.at(-1))==null?void 0:t.function}},ds=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(so(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(n=>{var r;return n.role==="assistant"&&((r=n.tool_calls)==null?void 0:r.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},hs=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},io=function(e){if(e.n!=null&&e.n>1)throw new I("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},oo=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class As extends lo{static runTools(e,t,n){const r=new As,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e,t=!0){super._addMessage(e,t),pn(e)&&e.content&&this._emit("content",e.content)}}const co=1,uo=2,ho=4,fo=8,mo=16,po=32,go=64,_o=128,yo=256,bo=_o|yo,wo=mo|po|bo|go,xo=co|uo|wo,vo=ho|fo,tu=xo|vo,Q={STR:co,NUM:uo,ARR:ho,OBJ:fo,NULL:mo,BOOL:po,NAN:go,INFINITY:_o,MINUS_INFINITY:yo,INF:bo,SPECIAL:wo,ATOM:xo,COLLECTION:vo,ALL:tu};class nu extends Error{}class su extends Error{}function ru(s,e=Q.ALL){if(typeof s!="string")throw new TypeError("expecting str, got ".concat(typeof s));if(!s.trim())throw new Error("".concat(s," is empty"));return au(s.trim(),e)}const au=(s,e)=>{const t=s.length;let n=0;const r=y=>{throw new nu("".concat(y," at position ").concat(n))},a=y=>{throw new su("".concat(y," at position ").concat(n))},o=()=>(f(),n>=t&&r("Unexpected end of input"),s[n]==='"'?c():s[n]==="{"?d():s[n]==="["?h():s.substring(n,n+4)==="null"||Q.NULL&e&&t-n<4&&"null".startsWith(s.substring(n))?(n+=4,null):s.substring(n,n+4)==="true"||Q.BOOL&e&&t-n<4&&"true".startsWith(s.substring(n))?(n+=4,!0):s.substring(n,n+5)==="false"||Q.BOOL&e&&t-n<5&&"false".startsWith(s.substring(n))?(n+=5,!1):s.substring(n,n+8)==="Infinity"||Q.INFINITY&e&&t-n<8&&"Infinity".startsWith(s.substring(n))?(n+=8,1/0):s.substring(n,n+9)==="-Infinity"||Q.MINUS_INFINITY&e&&1<t-n&&t-n<9&&"-Infinity".startsWith(s.substring(n))?(n+=9,-1/0):s.substring(n,n+3)==="NaN"||Q.NAN&e&&t-n<3&&"NaN".startsWith(s.substring(n))?(n+=3,NaN):p()),c=()=>{const y=n;let m=!1;for(n++;n<t&&(s[n]!=='"'||m&&s[n-1]==="\\");)m=s[n]==="\\"?!m:!1,n++;if(s.charAt(n)=='"')try{return JSON.parse(s.substring(y,++n-Number(m)))}catch(w){a(String(w))}else if(Q.STR&e)try{return JSON.parse(s.substring(y,n-Number(m))+'"')}catch(w){return JSON.parse(s.substring(y,s.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},d=()=>{n++,f();const y={};try{for(;s[n]!=="}";){if(f(),n>=t&&Q.OBJ&e)return y;const m=c();f(),n++;try{const w=o();Object.defineProperty(y,m,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(Q.OBJ&e)return y;throw w}f(),s[n]===","&&n++}}catch(m){if(Q.OBJ&e)return y;r("Expected '}' at end of object")}return n++,y},h=()=>{n++;const y=[];try{for(;s[n]!=="]";)y.push(o()),f(),s[n]===","&&n++}catch(m){if(Q.ARR&e)return y;r("Expected ']' at end of array")}return n++,y},p=()=>{if(n===0){s==="-"&&Q.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(s)}catch(m){if(Q.NUM&e)try{return s[s.length-1]==="."?JSON.parse(s.substring(0,s.lastIndexOf("."))):JSON.parse(s.substring(0,s.lastIndexOf("e")))}catch(w){}a(String(m))}}const y=n;for(s[n]==="-"&&n++;s[n]&&!",]}".includes(s[n]);)n++;n==t&&!(Q.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(s.substring(y,n))}catch(m){s.substring(y,n)==="-"&&Q.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(s.substring(y,s.lastIndexOf("e")))}catch(w){a(String(w))}}},f=()=>{for(;n<t&&" \n\r	".includes(s[n]);)n++};return o()},Fr=s=>ru(s,Q.ALL^Q.NUM);var J,Ie,Qe,Me,Jn,Vt,Kn,Vn,Yn,Yt,Qn,Ur;class Nt extends lo{constructor(e){super(),J.add(this),Ie.set(this,void 0),Qe.set(this,void 0),Me.set(this,void 0),O(this,Ie,e),O(this,Qe,[])}get currentChatCompletionSnapshot(){return u(this,Me,"f")}static fromReadableStream(e){const t=new Nt(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new Nt(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){var o;super._createChatCompletion;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),u(this,J,"m",Jn).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const c of a)u(this,J,"m",Kn).call(this,c);if((o=a.controller.signal)!=null&&o.aborted)throw new we;return this._addChatCompletion(u(this,J,"m",Yt).call(this))}async _fromReadableStream(e,t){var o;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),u(this,J,"m",Jn).call(this),this._connected();const r=ke.fromReadableStream(e,this.controller);let a;for await(const c of r)a&&a!==c.id&&this._addChatCompletion(u(this,J,"m",Yt).call(this)),u(this,J,"m",Kn).call(this,c),a=c.id;if((o=r.controller.signal)!=null&&o.aborted)throw new we;return this._addChatCompletion(u(this,J,"m",Yt).call(this))}[(Ie=new WeakMap,Qe=new WeakMap,Me=new WeakMap,J=new WeakSet,Jn=function(){this.ended||O(this,Me,void 0)},Vt=function(t){let n=u(this,Qe,"f")[t.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},u(this,Qe,"f")[t.index]=n,n)},Kn=function(t){var r,a,o,c,d,h,p,f,y,m,w,R,A,U,E,B,N,_,v,C;if(this.ended)return;const n=u(this,J,"m",Ur).call(this,t);this._emit("chunk",t,n);for(const L of t.choices){const j=n.choices[L.index];L.delta.content!=null&&((r=j.message)==null?void 0:r.role)==="assistant"&&((a=j.message)!=null&&a.content)&&(this._emit("content",L.delta.content,j.message.content),this._emit("content.delta",{delta:L.delta.content,snapshot:j.message.content,parsed:j.message.parsed})),L.delta.refusal!=null&&((o=j.message)==null?void 0:o.role)==="assistant"&&((c=j.message)!=null&&c.refusal)&&this._emit("refusal.delta",{delta:L.delta.refusal,snapshot:j.message.refusal}),((d=L.logprobs)==null?void 0:d.content)!=null&&((h=j.message)==null?void 0:h.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(p=L.logprobs)==null?void 0:p.content,snapshot:(y=(f=j.logprobs)==null?void 0:f.content)!=null?y:[]}),((m=L.logprobs)==null?void 0:m.refusal)!=null&&((w=j.message)==null?void 0:w.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(R=L.logprobs)==null?void 0:R.refusal,snapshot:(U=(A=j.logprobs)==null?void 0:A.refusal)!=null?U:[]});const $=u(this,J,"m",Vt).call(this,j);j.finish_reason&&(u(this,J,"m",Yn).call(this,j),$.current_tool_call_index!=null&&u(this,J,"m",Vn).call(this,j,$.current_tool_call_index));for(const M of(E=L.delta.tool_calls)!=null?E:[])$.current_tool_call_index!==M.index&&(u(this,J,"m",Yn).call(this,j),$.current_tool_call_index!=null&&u(this,J,"m",Vn).call(this,j,$.current_tool_call_index)),$.current_tool_call_index=M.index;for(const M of(B=L.delta.tool_calls)!=null?B:[]){const W=(N=j.message.tool_calls)==null?void 0:N[M.index];W!=null&&W.type&&((W==null?void 0:W.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(_=W.function)==null?void 0:_.name,index:M.index,arguments:W.function.arguments,parsed_arguments:W.function.parsed_arguments,arguments_delta:(C=(v=M.function)==null?void 0:v.arguments)!=null?C:""}):(W==null||W.type,void 0))}}},Vn=function(t,n){var o,c,d;if(u(this,J,"m",Vt).call(this,t).done_tool_calls.has(n))return;const a=(o=t.message.tool_calls)==null?void 0:o[n];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const h=(d=(c=u(this,Ie,"f"))==null?void 0:c.tools)==null?void 0:d.find(p=>p.type==="function"&&p.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:n,arguments:a.function.arguments,parsed_arguments:It(h)?h.$parseRaw(a.function.arguments):h!=null&&h.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Yn=function(t){var r,a;const n=u(this,J,"m",Vt).call(this,t);if(t.message.content&&!n.content_done){n.content_done=!0;const o=u(this,J,"m",Qn).call(this);this._emit("content.done",{content:t.message.content,parsed:o?o.$parseRaw(t.message.content):null})}t.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(r=t.logprobs)!=null&&r.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},Yt=function(){if(this.ended)throw new I("stream has ended, this shouldn't happen");const t=u(this,Me,"f");if(!t)throw new I("request ended without sending any chunks");return O(this,Me,void 0),O(this,Qe,[]),iu(t,u(this,Ie,"f"))},Qn=function(){var n;const t=(n=u(this,Ie,"f"))==null?void 0:n.response_format;return xs(t)?t:null},Ur=function(t){var p,f,y,m,w,R;var n,r,a,o;let c=u(this,Me,"f");const{choices:d,...h}=t;c?Object.assign(c,h):c=O(this,Me,{...h,choices:[]});for(const{delta:A,finish_reason:U,index:E,logprobs:B=null,...N}of t.choices){let _=c.choices[E];if(_||(_=c.choices[E]={finish_reason:U,index:E,message:{},logprobs:B,...N}),B)if(!_.logprobs)_.logprobs=Object.assign({},B);else{const{content:W,refusal:se,..._e}=B;Object.assign(_.logprobs,_e),W&&((p=(n=_.logprobs).content)!=null||(n.content=[]),_.logprobs.content.push(...W)),se&&((f=(r=_.logprobs).refusal)!=null||(r.refusal=[]),_.logprobs.refusal.push(...se))}if(U&&(_.finish_reason=U,u(this,Ie,"f")&&ao(u(this,Ie,"f")))){if(U==="length")throw new Fi;if(U==="content_filter")throw new Ui}if(Object.assign(_,N),!A)continue;const{content:v,refusal:C,function_call:L,role:j,tool_calls:$,...M}=A;if(Object.assign(_.message,M),C&&(_.message.refusal=(_.message.refusal||"")+C),j&&(_.message.role=j),L&&(_.message.function_call?(L.name&&(_.message.function_call.name=L.name),L.arguments&&((y=(a=_.message.function_call).arguments)!=null||(a.arguments=""),_.message.function_call.arguments+=L.arguments)):_.message.function_call=L),v&&(_.message.content=(_.message.content||"")+v,!_.message.refusal&&u(this,J,"m",Qn).call(this)&&(_.message.parsed=Fr(_.message.content))),$){_.message.tool_calls||(_.message.tool_calls=[]);for(const{index:W,id:se,type:_e,function:ie,...kn}of $){const ye=(m=(o=_.message.tool_calls)[W])!=null?m:o[W]={};Object.assign(ye,kn),se&&(ye.id=se),_e&&(ye.type=_e),ie&&((R=ye.function)!=null||(ye.function={name:(w=ie.name)!=null?w:"",arguments:""})),ie!=null&&ie.name&&(ye.function.name=ie.name),ie!=null&&ie.arguments&&(ye.function.arguments+=ie.arguments,Qc(u(this,Ie,"f"),ye)&&(ye.function.parsed_arguments=Fr(ye.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ke(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function iu(s,e){const{id:t,choices:n,created:r,model:a,system_fingerprint:o,...c}=s,d={...c,id:t,choices:n.map(({message:h,finish_reason:p,index:f,logprobs:y,...m})=>{var B,N,_;if(!p)throw new I("missing finish_reason for choice ".concat(f));const{content:w=null,function_call:R,tool_calls:A,...U}=h,E=h.role;if(!E)throw new I("missing role for choice ".concat(f));if(R){const{arguments:v,name:C}=R;if(v==null)throw new I("missing function_call.arguments for choice ".concat(f));if(!C)throw new I("missing function_call.name for choice ".concat(f));return{...m,message:{content:w,function_call:{arguments:v,name:C},role:E,refusal:(B=h.refusal)!=null?B:null},finish_reason:p,index:f,logprobs:y}}return A?{...m,index:f,finish_reason:p,logprobs:y,message:{...U,role:E,content:w,refusal:(N=h.refusal)!=null?N:null,tool_calls:A.map((v,C)=>{const{function:L,type:j,id:$,...M}=v,{arguments:W,name:se,..._e}=L||{};if($==null)throw new I("missing choices[".concat(f,"].tool_calls[").concat(C,"].id\n").concat(Qt(s)));if(j==null)throw new I("missing choices[".concat(f,"].tool_calls[").concat(C,"].type\n").concat(Qt(s)));if(se==null)throw new I("missing choices[".concat(f,"].tool_calls[").concat(C,"].function.name\n").concat(Qt(s)));if(W==null)throw new I("missing choices[".concat(f,"].tool_calls[").concat(C,"].function.arguments\n").concat(Qt(s)));return{...M,id:$,type:j,function:{..._e,name:se,arguments:W}}})}}:{...m,message:{...U,content:w,role:E,refusal:(_=h.refusal)!=null?_:null},finish_reason:p,index:f,logprobs:y}}),created:r,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return Kc(d,e)}function Qt(s){return JSON.stringify(s)}class bn extends Nt{static fromReadableStream(e){const t=new bn(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,n){const r=new bn(t),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}var Zr,ea,ta;let Ss=class extends P{constructor(){super(...arguments),this.messages=new no(this._client)}create(e,t){var n;return this._client.post("/chat/completions",{body:e,...t,stream:(n=e.stream)!=null?n:!1})}retrieve(e,t){return this._client.get(x(Zr||(Zr=b(["/chat/completions/",""])),e),t)}update(e,t,n){return this._client.post(x(ea||(ea=b(["/chat/completions/",""])),e),{body:t,...n})}list(e={},t){return this._client.getAPIList("/chat/completions",G,{query:e,...t})}delete(e,t){return this._client.delete(x(ta||(ta=b(["/chat/completions/",""])),e),t)}parse(e,t){return Zc(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(n=>vs(n,e))}runTools(e,t){return e.stream?bn.runTools(this._client,e,t):As.runTools(this._client,e,t)}stream(e,t){return Nt.createChatCompletion(this._client,e,t)}};Ss.Messages=no;class Es extends P{constructor(){super(...arguments),this.completions=new Ss(this._client)}}Es.Completions=Ss;const Ao=Symbol("brand.privateNullableHeaders");function*ou(s){if(!s)return;if(Ao in s){const{values:n,nulls:r}=s;yield*n.entries();for(const a of r)yield[a,null];return}let e=!1,t;s instanceof Headers?t=s.entries():Rr(s)?t=s:(e=!0,t=Object.entries(s!=null?s:{}));for(let n of t){const r=n[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=Rr(n[1])?n[1]:[n[1]];let o=!1;for(const c of a)c!==void 0&&(e&&!o&&(o=!0,yield[r,null]),yield[r,c])}}const k=s=>{const e=new Headers,t=new Set;for(const n of s){const r=new Set;for(const[a,o]of ou(n)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),o===null?(e.delete(a),t.add(c)):(e.append(a,o),t.delete(c))}}return{[Ao]:!0,values:e,nulls:t}};class So extends P{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:k([{Accept:"application/octet-stream"},t==null?void 0:t.headers]),__binaryResponse:!0})}}class Eo extends P{create(e,t){var n;return this._client.post("/audio/transcriptions",ze({body:e,...t,stream:(n=e.stream)!=null?n:!1,__metadata:{model:e.model}},this._client))}}class Co extends P{create(e,t){return this._client.post("/audio/translations",ze({body:e,...t,__metadata:{model:e.model}},this._client))}}class Pt extends P{constructor(){super(...arguments),this.transcriptions=new Eo(this._client),this.translations=new Co(this._client),this.speech=new So(this._client)}}Pt.Transcriptions=Eo;Pt.Translations=Co;Pt.Speech=So;var na,sa;class To extends P{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(x(na||(na=b(["/batches/",""])),e),t)}list(e={},t){return this._client.getAPIList("/batches",G,{query:e,...t})}cancel(e,t){return this._client.post(x(sa||(sa=b(["/batches/","/cancel"])),e),t)}}var ra,aa,ia;class ko extends P{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(x(ra||(ra=b(["/assistants/",""])),e),{...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,n){return this._client.post(x(aa||(aa=b(["/assistants/",""])),e),{body:t,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e={},t){return this._client.getAPIList("/assistants",G,{query:e,...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(x(ia||(ia=b(["/assistants/",""])),e),{...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class Ro extends P{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class No extends P{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class En extends P{constructor(){super(...arguments),this.sessions=new Ro(this._client),this.transcriptionSessions=new No(this._client)}}En.Sessions=Ro;En.TranscriptionSessions=No;var oa,la,ca,ua,da;class Oo extends P{create(e,t,n){return this._client.post(x(oa||(oa=b(["/threads/","/messages"])),e),{body:t,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,t,n){const{thread_id:r}=t;return this._client.get(x(la||(la=b(["/threads/","/messages/",""])),r,e),{...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,t,n){const{thread_id:r,...a}=t;return this._client.post(x(ca||(ca=b(["/threads/","/messages/",""])),r,e),{body:a,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,t={},n){return this._client.getAPIList(x(ua||(ua=b(["/threads/","/messages"])),e),G,{query:t,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,t,n){const{thread_id:r}=t;return this._client.delete(x(da||(da=b(["/threads/","/messages/",""])),r,e),{...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}var ha,fa;class Io extends P{retrieve(e,t,n){const{thread_id:r,run_id:a,...o}=t;return this._client.get(x(ha||(ha=b(["/threads/","/runs/","/steps/",""])),r,a,e),{query:o,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,t,n){const{thread_id:r,...a}=t;return this._client.getAPIList(x(fa||(fa=b(["/threads/","/runs/","/steps"])),r,e),G,{query:a,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}const lu=s=>{if(typeof Buffer<"u"){const e=Buffer.from(s,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(s),t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return Array.from(new Float32Array(n.buffer))}};var Zn={};const Ze=s=>{var e,t,n,r,a;if(typeof globalThis.process<"u")return(t=(e=Zn==null?void 0:Zn[s])==null?void 0:e.trim())!=null?t:void 0;if(typeof globalThis.Deno<"u")return(a=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,s))==null?void 0:a.trim()};var te,We,fs,Te,on,Ae,He,at,Be,wn,pe,ln,cn,kt,Et,Ct,Br,Wr,Hr,zr,qr,Gr,Xr;class Rt extends ws{constructor(){super(...arguments),te.add(this),fs.set(this,[]),Te.set(this,{}),on.set(this,{}),Ae.set(this,void 0),He.set(this,void 0),at.set(this,void 0),Be.set(this,void 0),wn.set(this,void 0),pe.set(this,void 0),ln.set(this,void 0),cn.set(this,void 0),kt.set(this,void 0)}[(fs=new WeakMap,Te=new WeakMap,on=new WeakMap,Ae=new WeakMap,He=new WeakMap,at=new WeakMap,Be=new WeakMap,wn=new WeakMap,pe=new WeakMap,ln=new WeakMap,cn=new WeakMap,kt=new WeakMap,te=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new We;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=ke.fromReadableStream(e,this.controller);for await(const o of r)u(this,te,"m",Et).call(this,o);if((a=r.controller.signal)!=null&&a.aborted)throw new we;return this._addRun(u(this,te,"m",Ct).call(this))}toReadableStream(){return new ke(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r){const a=new We;return a._run(()=>a._runToolAssistantStream(e,t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,t,n,r){var d;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},c=await e.submitToolOutputs(t,o,{...r,signal:this.controller.signal});this._connected();for await(const h of c)u(this,te,"m",Et).call(this,h);if((d=c.controller.signal)!=null&&d.aborted)throw new we;return this._addRun(u(this,te,"m",Ct).call(this))}static createThreadAssistantStream(e,t,n){const r=new We;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const a=new We;return a._run(()=>a._runAssistantStream(e,t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return u(this,ln,"f")}currentRun(){return u(this,cn,"f")}currentMessageSnapshot(){return u(this,Ae,"f")}currentRunStepSnapshot(){return u(this,kt,"f")}async finalRunSteps(){return await this.done(),Object.values(u(this,Te,"f"))}async finalMessages(){return await this.done(),Object.values(u(this,on,"f"))}async finalRun(){if(await this.done(),!u(this,He,"f"))throw Error("Final run was not received.");return u(this,He,"f")}async _createThreadAssistantStream(e,t,n){var c;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},o=await e.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const d of o)u(this,te,"m",Et).call(this,d);if((c=o.controller.signal)!=null&&c.aborted)throw new we;return this._addRun(u(this,te,"m",Ct).call(this))}async _createAssistantStream(e,t,n,r){var d;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},c=await e.create(t,o,{...r,signal:this.controller.signal});this._connected();for await(const h of c)u(this,te,"m",Et).call(this,h);if((d=c.controller.signal)!=null&&d.aborted)throw new we;return this._addRun(u(this,te,"m",Ct).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let a=e[n];if(a==null){e[n]=r;continue}if(n==="index"||n==="type"){e[n]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(qn(a)&&qn(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...r);continue}for(const o of r){if(!qn(o))throw new Error("Expected array delta entry to be an object but got: ".concat(o));const c=o.index;if(c==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error("Expected array delta entry `index` property to be a number but got ".concat(c));const d=a[c];d==null?a.push(o):a[c]=this.accumulateDelta(d,o)}continue}else throw Error("Unhandled record type: ".concat(n,", deltaValue: ").concat(r,", accValue: ").concat(a));e[n]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r){return await this._createToolAssistantStream(t,e,n,r)}}We=Rt,Et=function(e){if(!this.ended)switch(O(this,ln,e),u(this,te,"m",Hr).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":u(this,te,"m",Xr).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":u(this,te,"m",Wr).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":u(this,te,"m",Br).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ct=function(){if(this.ended)throw new I("stream has ended, this shouldn't happen");if(!u(this,He,"f"))throw Error("Final run has not been received");return u(this,He,"f")},Br=function(e){const[t,n]=u(this,te,"m",qr).call(this,e,u(this,Ae,"f"));O(this,Ae,t),u(this,on,"f")[t.id]=t;for(const r of n){const a=t.content[r.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,o=t.content[r.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=u(this,at,"f")){if(u(this,Be,"f"))switch(u(this,Be,"f").type){case"text":this._emit("textDone",u(this,Be,"f").text,u(this,Ae,"f"));break;case"image_file":this._emit("imageFileDone",u(this,Be,"f").image_file,u(this,Ae,"f"));break}O(this,at,r.index)}O(this,Be,t.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(u(this,at,"f")!==void 0){const r=e.data.content[u(this,at,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,u(this,Ae,"f"));break;case"text":this._emit("textDone",r.text,u(this,Ae,"f"));break}}u(this,Ae,"f")&&this._emit("messageDone",e.data),O(this,Ae,void 0)}},Wr=function(e){const t=u(this,te,"m",zr).call(this,e);switch(O(this,kt,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of n.step_details.tool_calls)a.index==u(this,wn,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(u(this,pe,"f")&&this._emit("toolCallDone",u(this,pe,"f")),O(this,wn,a.index),O(this,pe,t.step_details.tool_calls[a.index]),u(this,pe,"f")&&this._emit("toolCallCreated",u(this,pe,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":O(this,kt,void 0),e.data.step_details.type=="tool_calls"&&u(this,pe,"f")&&(this._emit("toolCallDone",u(this,pe,"f")),O(this,pe,void 0)),this._emit("runStepDone",e.data,t);break}},Hr=function(e){u(this,fs,"f").push(e),this._emit("event",e)},zr=function(e){switch(e.event){case"thread.run.step.created":return u(this,Te,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=u(this,Te,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=We.accumulateDelta(t,n.delta);u(this,Te,"f")[e.data.id]=r}return u(this,Te,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":u(this,Te,"f")[e.data.id]=e.data;break}if(u(this,Te,"f")[e.data.id])return u(this,Te,"f")[e.data.id];throw new Error("No snapshot available")},qr=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in t.content){let o=t.content[a.index];t.content[a.index]=u(this,te,"m",Gr).call(this,a,o)}else t.content[a.index]=a,n.push(a);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Gr=function(e,t){return We.accumulateDelta(t,e)},Xr=function(e){switch(O(this,cn,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":O(this,He,e.data),u(this,pe,"f")&&(this._emit("toolCallDone",u(this,pe,"f")),O(this,pe,void 0));break}};var ma,pa,ga,_a,ya,ba;let Cs=class extends P{constructor(){super(...arguments),this.steps=new Io(this._client)}create(e,t,n){var o;const{include:r,...a}=t;return this._client.post(x(ma||(ma=b(["/threads/","/runs"])),e),{query:{include:r},body:a,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:(o=t.stream)!=null?o:!1})}retrieve(e,t,n){const{thread_id:r}=t;return this._client.get(x(pa||(pa=b(["/threads/","/runs/",""])),r,e),{...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,t,n){const{thread_id:r,...a}=t;return this._client.post(x(ga||(ga=b(["/threads/","/runs/",""])),r,e),{body:a,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,t={},n){return this._client.getAPIList(x(_a||(_a=b(["/threads/","/runs"])),e),G,{query:t,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}cancel(e,t,n){const{thread_id:r}=t;return this._client.post(x(ya||(ya=b(["/threads/","/runs/","/cancel"])),r,e),{...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(r.id,{thread_id:e},n)}createAndStream(e,t,n){return Rt.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){var a,o;const r=k([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(o=(a=n==null?void 0:n.pollIntervalMs)==null?void 0:a.toString())!=null?o:void 0}]);for(;;){const{data:c,response:d}=await this.retrieve(e,t,{...n,headers:{...n==null?void 0:n.headers,...r}}).withResponse();switch(c.status){case"queued":case"in_progress":case"cancelling":let h=5e3;if(n!=null&&n.pollIntervalMs)h=n.pollIntervalMs;else{const p=d.headers.get("openai-poll-after-ms");if(p){const f=parseInt(p);isNaN(f)||(h=f)}}await Ot(h);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return c}}}stream(e,t,n){return Rt.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n){var o;const{thread_id:r,...a}=t;return this._client.post(x(ba||(ba=b(["/threads/","/runs/","/submit_tool_outputs"])),r,e),{body:a,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:(o=t.stream)!=null?o:!1})}async submitToolOutputsAndPoll(e,t,n){const r=await this.submitToolOutputs(e,t,n);return await this.poll(r.id,t,n)}submitToolOutputsStream(e,t,n){return Rt.createToolAssistantStream(e,this._client.beta.threads.runs,t,n)}};Cs.Steps=Io;var wa,xa,va;class Cn extends P{constructor(){super(...arguments),this.runs=new Cs(this._client),this.messages=new Oo(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(x(wa||(wa=b(["/threads/",""])),e),{...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,n){return this._client.post(x(xa||(xa=b(["/threads/",""])),e),{body:t,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,t){return this._client.delete(x(va||(va=b(["/threads/",""])),e),{...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}createAndRun(e,t){var n;return this._client.post("/threads/runs",{body:e,...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers]),stream:(n=e.stream)!=null?n:!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.id,{thread_id:n.thread_id},t)}createAndRunStream(e,t){return Rt.createThreadAssistantStream(e,this._client.beta.threads,t)}}Cn.Runs=Cs;Cn.Messages=Oo;class jt extends P{constructor(){super(...arguments),this.realtime=new En(this._client),this.assistants=new ko(this._client),this.threads=new Cn(this._client)}}jt.Realtime=En;jt.Assistants=ko;jt.Threads=Cn;class Po extends P{create(e,t){var n;return this._client.post("/completions",{body:e,...t,stream:(n=e.stream)!=null?n:!1})}}var Aa;class jo extends P{retrieve(e,t,n){const{container_id:r}=t;return this._client.get(x(Aa||(Aa=b(["/containers/","/files/","/content"])),r,e),{...n,headers:k([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}}var Sa,Ea,Ca,Ta;let Ts=class extends P{constructor(){super(...arguments),this.content=new jo(this._client)}create(e,t,n){return this._client.post(x(Sa||(Sa=b(["/containers/","/files"])),e),ze({body:t,...n},this._client))}retrieve(e,t,n){const{container_id:r}=t;return this._client.get(x(Ea||(Ea=b(["/containers/","/files/",""])),r,e),n)}list(e,t={},n){return this._client.getAPIList(x(Ca||(Ca=b(["/containers/","/files"])),e),G,{query:t,...n})}delete(e,t,n){const{container_id:r}=t;return this._client.delete(x(Ta||(Ta=b(["/containers/","/files/",""])),r,e),{...n,headers:k([{Accept:"*/*"},n==null?void 0:n.headers])})}};Ts.Content=jo;var ka,Ra;class ks extends P{constructor(){super(...arguments),this.files=new Ts(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(x(ka||(ka=b(["/containers/",""])),e),t)}list(e={},t){return this._client.getAPIList("/containers",G,{query:e,...t})}delete(e,t){return this._client.delete(x(Ra||(Ra=b(["/containers/",""])),e),{...t,headers:k([{Accept:"*/*"},t==null?void 0:t.headers])})}}ks.Files=Ts;class Mo extends P{create(e,t){const n=!!e.encoding_format;let r=n?e.encoding_format:"base64";n&&ee(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return n?a:(ee(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(o=>(o&&o.data&&o.data.forEach(c=>{const d=c.embedding;c.embedding=lu(d)}),o)))}}var Na,Oa;class Lo extends P{retrieve(e,t,n){const{eval_id:r,run_id:a}=t;return this._client.get(x(Na||(Na=b(["/evals/","/runs/","/output_items/",""])),r,a,e),n)}list(e,t,n){const{eval_id:r,...a}=t;return this._client.getAPIList(x(Oa||(Oa=b(["/evals/","/runs/","/output_items"])),r,e),G,{query:a,...n})}}var Ia,Pa,ja,Ma,La;class Rs extends P{constructor(){super(...arguments),this.outputItems=new Lo(this._client)}create(e,t,n){return this._client.post(x(Ia||(Ia=b(["/evals/","/runs"])),e),{body:t,...n})}retrieve(e,t,n){const{eval_id:r}=t;return this._client.get(x(Pa||(Pa=b(["/evals/","/runs/",""])),r,e),n)}list(e,t={},n){return this._client.getAPIList(x(ja||(ja=b(["/evals/","/runs"])),e),G,{query:t,...n})}delete(e,t,n){const{eval_id:r}=t;return this._client.delete(x(Ma||(Ma=b(["/evals/","/runs/",""])),r,e),n)}cancel(e,t,n){const{eval_id:r}=t;return this._client.post(x(La||(La=b(["/evals/","/runs/",""])),r,e),n)}}Rs.OutputItems=Lo;var $a,Da,Fa;class Ns extends P{constructor(){super(...arguments),this.runs=new Rs(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(x($a||($a=b(["/evals/",""])),e),t)}update(e,t,n){return this._client.post(x(Da||(Da=b(["/evals/",""])),e),{body:t,...n})}list(e={},t){return this._client.getAPIList("/evals",G,{query:e,...t})}delete(e,t){return this._client.delete(x(Fa||(Fa=b(["/evals/",""])),e),t)}}Ns.Runs=Rs;var Ua,Ba,Wa;let $o=class extends P{create(e,t){return this._client.post("/files",ze({body:e,...t},this._client))}retrieve(e,t){return this._client.get(x(Ua||(Ua=b(["/files/",""])),e),t)}list(e={},t){return this._client.getAPIList("/files",G,{query:e,...t})}delete(e,t){return this._client.delete(x(Ba||(Ba=b(["/files/",""])),e),t)}content(e,t){return this._client.get(x(Wa||(Wa=b(["/files/","/content"])),e),{...t,headers:k([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await Ot(t),o=await this.retrieve(e),Date.now()-a>n)throw new ys({message:"Giving up on waiting for file ".concat(e," to finish processing after ").concat(n," milliseconds.")});return o}};class Do extends P{}let Fo=class extends P{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class Os extends P{constructor(){super(...arguments),this.graders=new Fo(this._client)}}Os.Graders=Fo;var Ha,za,qa;class Uo extends P{create(e,t,n){return this._client.getAPIList(x(Ha||(Ha=b(["/fine_tuning/checkpoints/","/permissions"])),e),Sn,{body:t,method:"post",...n})}retrieve(e,t={},n){return this._client.get(x(za||(za=b(["/fine_tuning/checkpoints/","/permissions"])),e),{query:t,...n})}delete(e,t,n){const{fine_tuned_model_checkpoint:r}=t;return this._client.delete(x(qa||(qa=b(["/fine_tuning/checkpoints/","/permissions/",""])),r,e),n)}}let Is=class extends P{constructor(){super(...arguments),this.permissions=new Uo(this._client)}};Is.Permissions=Uo;var Ga;class Bo extends P{list(e,t={},n){return this._client.getAPIList(x(Ga||(Ga=b(["/fine_tuning/jobs/","/checkpoints"])),e),G,{query:t,...n})}}var Xa,Ja,Ka,Va,Ya;class Ps extends P{constructor(){super(...arguments),this.checkpoints=new Bo(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(x(Xa||(Xa=b(["/fine_tuning/jobs/",""])),e),t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",G,{query:e,...t})}cancel(e,t){return this._client.post(x(Ja||(Ja=b(["/fine_tuning/jobs/","/cancel"])),e),t)}listEvents(e,t={},n){return this._client.getAPIList(x(Ka||(Ka=b(["/fine_tuning/jobs/","/events"])),e),G,{query:t,...n})}pause(e,t){return this._client.post(x(Va||(Va=b(["/fine_tuning/jobs/","/pause"])),e),t)}resume(e,t){return this._client.post(x(Ya||(Ya=b(["/fine_tuning/jobs/","/resume"])),e),t)}}Ps.Checkpoints=Bo;class it extends P{constructor(){super(...arguments),this.methods=new Do(this._client),this.jobs=new Ps(this._client),this.checkpoints=new Is(this._client),this.alpha=new Os(this._client)}}it.Methods=Do;it.Jobs=Ps;it.Checkpoints=Is;it.Alpha=Os;class Wo extends P{}class js extends P{constructor(){super(...arguments),this.graderModels=new Wo(this._client)}}js.GraderModels=Wo;class Ho extends P{createVariation(e,t){return this._client.post("/images/variations",ze({body:e,...t},this._client))}edit(e,t){var n;return this._client.post("/images/edits",ze({body:e,...t,stream:(n=e.stream)!=null?n:!1},this._client))}generate(e,t){var n;return this._client.post("/images/generations",{body:e,...t,stream:(n=e.stream)!=null?n:!1})}}var Qa,Za;class zo extends P{retrieve(e,t){return this._client.get(x(Qa||(Qa=b(["/models/",""])),e),t)}list(e){return this._client.getAPIList("/models",Sn,e)}delete(e,t){return this._client.delete(x(Za||(Za=b(["/models/",""])),e),t)}}class qo extends P{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function cu(s,e){return!e||!du(e)?{...s,output_parsed:null,output:s.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(n=>({...n,parsed:null}))}:t)}:Go(s,e)}function Go(s,e){const t=s.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:mu(e,r)};if(r.type==="message"){const a=r.content.map(o=>o.type==="output_text"?{...o,parsed:uu(e,o.text)}:o);return{...r,content:a}}return r}),n=Object.assign({},s,{output:t});return Object.getOwnPropertyDescriptor(s,"output_text")||ms(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const r of n.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),n}function uu(s,e){var t,n,r,a;return((n=(t=s.text)==null?void 0:t.format)==null?void 0:n.type)!=="json_schema"?null:"$parseRaw"in((r=s.text)==null?void 0:r.format)?((a=s.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function du(s){var e;return!!xs((e=s.text)==null?void 0:e.format)}function hu(s){return(s==null?void 0:s.$brand)==="auto-parseable-tool"}function fu(s,e){return s.find(t=>t.type==="function"&&t.name===e)}function mu(s,e){var n;const t=fu((n=s.tools)!=null?n:[],e.name);return{...e,...e,parsed_arguments:hu(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function ms(s){const e=[];for(const t of s.output)if(t.type==="message")for(const n of t.content)n.type==="output_text"&&e.push(n.text);s.output_text=e.join("")}var et,Zt,Le,en,Jr,Kr,Vr,Yr;class Ms extends ws{constructor(e){super(),et.add(this),Zt.set(this,void 0),Le.set(this,void 0),en.set(this,void 0),O(this,Zt,e)}static createResponse(e,t,n){const r=new Ms(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,n){var c,d;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),u(this,et,"m",Jr).call(this);let a,o=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),o=(c=t.starting_after)!=null?c:null):a=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const h of a)u(this,et,"m",Kr).call(this,h,o);if((d=a.controller.signal)!=null&&d.aborted)throw new we;return u(this,et,"m",Vr).call(this)}[(Zt=new WeakMap,Le=new WeakMap,en=new WeakMap,et=new WeakSet,Jr=function(){this.ended||O(this,Le,void 0)},Kr=function(t,n){if(this.ended)return;const r=(o,c)=>{(n==null||c.sequence_number>n)&&this._emit(o,c)},a=u(this,et,"m",Yr).call(this,t);switch(r("event",t),t.type){case"response.output_text.delta":{const o=a.output[t.output_index];if(!o)throw new I("missing output at index ".concat(t.output_index));if(o.type==="message"){const c=o.content[t.content_index];if(!c)throw new I("missing content at index ".concat(t.content_index));if(c.type!=="output_text")throw new I("expected content to be 'output_text', got ".concat(c.type));r("response.output_text.delta",{...t,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const o=a.output[t.output_index];if(!o)throw new I("missing output at index ".concat(t.output_index));o.type==="function_call"&&r("response.function_call_arguments.delta",{...t,snapshot:o.arguments});break}default:r(t.type,t);break}},Vr=function(){if(this.ended)throw new I("stream has ended, this shouldn't happen");const t=u(this,Le,"f");if(!t)throw new I("request ended without sending any events");O(this,Le,void 0);const n=pu(t,u(this,Zt,"f"));return O(this,en,n),n},Yr=function(t){let n=u(this,Le,"f");if(!n){if(t.type!=="response.created")throw new I("When snapshot hasn't been set yet, expected 'response.created' event, got ".concat(t.type));return n=O(this,Le,t.response),n}switch(t.type){case"response.output_item.added":{n.output.push(t.item);break}case"response.content_part.added":{const r=n.output[t.output_index];if(!r)throw new I("missing output at index ".concat(t.output_index));r.type==="message"&&r.content.push(t.part);break}case"response.output_text.delta":{const r=n.output[t.output_index];if(!r)throw new I("missing output at index ".concat(t.output_index));if(r.type==="message"){const a=r.content[t.content_index];if(!a)throw new I("missing content at index ".concat(t.content_index));if(a.type!=="output_text")throw new I("expected content to be 'output_text', got ".concat(a.type));a.text+=t.delta}break}case"response.function_call_arguments.delta":{const r=n.output[t.output_index];if(!r)throw new I("missing output at index ".concat(t.output_index));r.type==="function_call"&&(r.arguments+=t.delta);break}case"response.completed":{O(this,Le,t.response);break}}return n},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=u(this,en,"f");if(!e)throw new I("stream ended without producing a ChatCompletion");return e}}function pu(s,e){return cu(s,e)}var ei;class Xo extends P{list(e,t={},n){return this._client.getAPIList(x(ei||(ei=b(["/responses/","/input_items"])),e),G,{query:t,...n})}}var ti,ni,si;class Ls extends P{constructor(){super(...arguments),this.inputItems=new Xo(this._client)}create(e,t){var n;return this._client.post("/responses",{body:e,...t,stream:(n=e.stream)!=null?n:!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&ms(r),r))}retrieve(e,t={},n){var r;return this._client.get(x(ti||(ti=b(["/responses/",""])),e),{query:t,...n,stream:(r=t==null?void 0:t.stream)!=null?r:!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&ms(a),a))}delete(e,t){return this._client.delete(x(ni||(ni=b(["/responses/",""])),e),{...t,headers:k([{Accept:"*/*"},t==null?void 0:t.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(n=>Go(n,e))}stream(e,t){return Ms.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(x(si||(si=b(["/responses/","/cancel"])),e),t)}}Ls.InputItems=Xo;var ri;class Jo extends P{create(e,t,n){return this._client.post(x(ri||(ri=b(["/uploads/","/parts"])),e),ze({body:t,...n},this._client))}}var ai,ii;class $s extends P{constructor(){super(...arguments),this.parts=new Jo(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(x(ai||(ai=b(["/uploads/","/cancel"])),e),t)}complete(e,t,n){return this._client.post(x(ii||(ii=b(["/uploads/","/complete"])),e),{body:t,...n})}}$s.Parts=Jo;const gu=async s=>{const e=await Promise.allSettled(s),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error("".concat(t.length," promise(s) failed - see the above errors"))}const n=[];for(const r of e)r.status==="fulfilled"&&n.push(r.value);return n};var oi,li,ci,ui;class Ko extends P{create(e,t,n){return this._client.post(x(oi||(oi=b(["/vector_stores/","/file_batches"])),e),{body:t,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,t,n){const{vector_store_id:r}=t;return this._client.get(x(li||(li=b(["/vector_stores/","/file_batches/",""])),r,e),{...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}cancel(e,t,n){const{vector_store_id:r}=t;return this._client.post(x(ci||(ci=b(["/vector_stores/","/file_batches/","/cancel"])),r,e),{...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n){const{vector_store_id:r,...a}=t;return this._client.getAPIList(x(ui||(ui=b(["/vector_stores/","/file_batches/","/files"])),r,e),G,{query:a,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async poll(e,t,n){var a,o;const r=k([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(o=(a=n==null?void 0:n.pollIntervalMs)==null?void 0:a.toString())!=null?o:void 0}]);for(;;){const{data:c,response:d}=await this.retrieve(t,{vector_store_id:e},{...n,headers:r}).withResponse();switch(c.status){case"in_progress":let h=5e3;if(n!=null&&n.pollIntervalMs)h=n.pollIntervalMs;else{const p=d.headers.get("openai-poll-after-ms");if(p){const f=parseInt(p);isNaN(f)||(h=f)}}await Ot(h);break;case"failed":case"cancelled":case"completed":return c}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){var y;if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(y=r==null?void 0:r.maxConcurrency)!=null?y:5,o=Math.min(a,t.length),c=this._client,d=t.values(),h=[...n];async function p(m){for(let w of m){const R=await c.files.create({file:w,purpose:"assistants"},r);h.push(R.id)}}const f=Array(o).fill(d).map(p);return await gu(f),await this.createAndPoll(e,{file_ids:h})}}var di,hi,fi,mi,pi,gi;class Vo extends P{create(e,t,n){return this._client.post(x(di||(di=b(["/vector_stores/","/files"])),e),{body:t,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,t,n){const{vector_store_id:r}=t;return this._client.get(x(hi||(hi=b(["/vector_stores/","/files/",""])),r,e),{...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,t,n){const{vector_store_id:r,...a}=t;return this._client.post(x(fi||(fi=b(["/vector_stores/","/files/",""])),r,e),{body:a,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,t={},n){return this._client.getAPIList(x(mi||(mi=b(["/vector_stores/","/files"])),e),G,{query:t,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,t,n){const{vector_store_id:r}=t;return this._client.delete(x(pi||(pi=b(["/vector_stores/","/files/",""])),r,e),{...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){var a,o;const r=k([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(o=(a=n==null?void 0:n.pollIntervalMs)==null?void 0:a.toString())!=null?o:void 0}]);for(;;){const c=await this.retrieve(t,{vector_store_id:e},{...n,headers:r}).withResponse(),d=c.data;switch(d.status){case"in_progress":let h=5e3;if(n!=null&&n.pollIntervalMs)h=n.pollIntervalMs;else{const p=c.response.headers.get("openai-poll-after-ms");if(p){const f=parseInt(p);isNaN(f)||(h=f)}}await Ot(h);break;case"failed":case"completed":return d}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){const{vector_store_id:r}=t;return this._client.getAPIList(x(gi||(gi=b(["/vector_stores/","/files/","/content"])),r,e),Sn,{...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}var _i,yi,bi,wi;class Tn extends P{constructor(){super(...arguments),this.files=new Vo(this._client),this.fileBatches=new Ko(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(x(_i||(_i=b(["/vector_stores/",""])),e),{...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,n){return this._client.post(x(yi||(yi=b(["/vector_stores/",""])),e),{body:t,...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",G,{query:e,...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(x(bi||(bi=b(["/vector_stores/",""])),e),{...t,headers:k([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}search(e,t,n){return this._client.getAPIList(x(wi||(wi=b(["/vector_stores/","/search"])),e),Sn,{body:t,method:"post",...n,headers:k([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}Tn.Files=Vo;Tn.FileBatches=Ko;var st,Yo,un;class Qo extends P{constructor(){super(...arguments),st.add(this)}async unwrap(e,t,n=this._client.webhookSecret,r=300){return await this.verifySignature(e,t,n,r),JSON.parse(e)}async verifySignature(e,t,n=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");u(this,st,"m",Yo).call(this,n);const a=k([t]).values,o=u(this,st,"m",un).call(this,a,"webhook-signature"),c=u(this,st,"m",un).call(this,a,"webhook-timestamp"),d=u(this,st,"m",un).call(this,a,"webhook-id"),h=parseInt(c,10);if(isNaN(h))throw new yt("Invalid webhook timestamp format");const p=Math.floor(Date.now()/1e3);if(p-h>r)throw new yt("Webhook timestamp is too old");if(h>p+r)throw new yt("Webhook timestamp is too new");const f=o.split(" ").map(R=>R.startsWith("v1,")?R.substring(3):R),y=n.startsWith("whsec_")?Buffer.from(n.replace("whsec_",""),"base64"):Buffer.from(n,"utf-8"),m=d?"".concat(d,".").concat(c,".").concat(e):"".concat(c,".").concat(e),w=await crypto.subtle.importKey("raw",y,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const R of f)try{const A=Buffer.from(R,"base64");if(await crypto.subtle.verify("HMAC",w,A,new TextEncoder().encode(m)))return}catch(A){continue}throw new yt("The given webhook signature does not match the expected signature")}}st=new WeakSet,Yo=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},un=function(e,t){if(!e)throw new Error("Headers are required");const n=e.get(t);if(n==null)throw new Error("Missing required header: ".concat(t));return n};var ps,Ds,dn,Zo;class F{constructor({baseURL:e=Ze("OPENAI_BASE_URL"),apiKey:t=Ze("OPENAI_API_KEY"),organization:n=(c=>(c=Ze("OPENAI_ORG_ID"))!=null?c:null)(),project:r=(d=>(d=Ze("OPENAI_PROJECT_ID"))!=null?d:null)(),webhookSecret:a=(h=>(h=Ze("OPENAI_WEBHOOK_SECRET"))!=null?h:null)(),...o}={}){var y,m,w,R,A,U;if(ps.add(this),dn.set(this,void 0),this.completions=new Po(this),this.chat=new Es(this),this.embeddings=new Mo(this),this.files=new $o(this),this.images=new Ho(this),this.audio=new Pt(this),this.moderations=new qo(this),this.models=new zo(this),this.fineTuning=new it(this),this.graders=new js(this),this.vectorStores=new Tn(this),this.webhooks=new Qo(this),this.beta=new jt(this),this.batches=new To(this),this.uploads=new $s(this),this.responses=new Ls(this),this.evals=new Ns(this),this.containers=new ks(this),t===void 0)throw new I("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const p={apiKey:t,organization:n,project:r,webhookSecret:a,...o,baseURL:e||"https://api.openai.com/v1"};if(!p.dangerouslyAllowBrowser&&_c())throw new I("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");this.baseURL=p.baseURL,this.timeout=(y=p.timeout)!=null?y:Ds.DEFAULT_TIMEOUT,this.logger=(m=p.logger)!=null?m:console;const f="warn";this.logLevel=f,this.logLevel=(R=(w=Mr(p.logLevel,"ClientOptions.logLevel",this))!=null?w:Mr(Ze("OPENAI_LOG"),"process.env['OPENAI_LOG']",this))!=null?R:f,this.fetchOptions=p.fetchOptions,this.maxRetries=(A=p.maxRetries)!=null?A:2,this.fetch=(U=p.fetch)!=null?U:vc(),O(this,dn,Sc),this._options=p,this.apiKey=t,this.organization=n,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return k([{Authorization:"Bearer ".concat(this.apiKey)}])}stringifyQuery(e){return Nc(e,{arrayFormat:"brackets"})}getUserAgent(){return"".concat(this.constructor.name,"/JS ").concat(tt)}defaultIdempotencyKey(){return"stainless-node-retry-".concat(Ni())}makeStatusError(e,t,n,r){return ne.generate(e,t,n,r)}buildURL(e,t,n){const r=!u(this,ps,"m",Zo).call(this)&&n||this.baseURL,a=dc(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return fc(o)||(t={...o,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new An(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){var U,E,B;const r=await e,a=(U=r.maxRetries)!=null?U:this.maxRetries;t==null&&(t=a),await this.prepareOptions(r);const{req:o,url:c,timeout:d}=await this.buildRequest(r,{retryCount:a-t});await this.prepareRequest(o,{url:c,options:r});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),p=n===void 0?"":", retryOf: ".concat(n),f=Date.now();if(ee(this).debug("[".concat(h,"] sending request"),Ue({retryOfRequestLogID:n,method:r.method,url:c,options:r,headers:o.headers})),(E=r.signal)!=null&&E.aborted)throw new we;const y=new AbortController,m=await this.fetchWithTimeout(c,o,d,y).catch(rs),w=Date.now();if(m instanceof Error){const N="retrying, ".concat(t," attempts remaining");if((B=r.signal)!=null&&B.aborted)throw new we;const _=ss(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(t)return ee(this).info("[".concat(h,"] connection ").concat(_?"timed out":"failed"," - ").concat(N)),ee(this).debug("[".concat(h,"] connection ").concat(_?"timed out":"failed"," (").concat(N,")"),Ue({retryOfRequestLogID:n,url:c,durationMs:w-f,message:m.message})),this.retryRequest(r,t,n!=null?n:h);throw ee(this).info("[".concat(h,"] connection ").concat(_?"timed out":"failed"," - error; no more retries left")),ee(this).debug("[".concat(h,"] connection ").concat(_?"timed out":"failed"," (error; no more retries left)"),Ue({retryOfRequestLogID:n,url:c,durationMs:w-f,message:m.message})),_?new ys:new xn({cause:m})}const R=[...m.headers.entries()].filter(([N])=>N==="x-request-id").map(([N,_])=>", "+N+": "+JSON.stringify(_)).join(""),A="[".concat(h).concat(p).concat(R,"] ").concat(o.method," ").concat(c," ").concat(m.ok?"succeeded":"failed"," with status ").concat(m.status," in ").concat(w-f,"ms");if(!m.ok){const N=await this.shouldRetry(m);if(t&&N){const $="retrying, ".concat(t," attempts remaining");return await Ac(m.body),ee(this).info("".concat(A," - ").concat($)),ee(this).debug("[".concat(h,"] response error (").concat($,")"),Ue({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:w-f})),this.retryRequest(r,t,n!=null?n:h,m.headers)}const _=N?"error; no more retries left":"error; not retryable";ee(this).info("".concat(A," - ").concat(_));const v=await m.text().catch($=>rs($).message),C=gc(v),L=C?void 0:v;throw ee(this).debug("[".concat(h,"] response error (").concat(_,")"),Ue({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,message:L,durationMs:Date.now()-f})),this.makeStatusError(m.status,C,L,m.headers)}return ee(this).info(A),ee(this).debug("[".concat(h,"] response start"),Ue({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:w-f})),{response:m,options:r,controller:y,requestLogID:h,retryOfRequestLogID:n,startTime:f}}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}requestAPIList(e,t){const n=this.makeRequest(t,null,void 0);return new Fc(this,n,e)}async fetchWithTimeout(e,t,n,r){const{signal:a,method:o,...c}=t||{};a&&a.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),n),h=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p={signal:r.signal,...h?{duplex:"half"}:{},method:"GET",...c};o&&(p.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(d)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n,r){var d;let a;const o=r==null?void 0:r.get("retry-after-ms");if(o){const h=parseFloat(o);Number.isNaN(h)||(a=h)}const c=r==null?void 0:r.get("retry-after");if(c&&!a){const h=parseFloat(c);Number.isNaN(h)?a=Date.parse(c)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=(d=e.maxRetries)!=null?d:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,h)}return await Ot(a),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,o=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return o*c*1e3}async buildRequest(e,{retryCount:t=0}={}){var m,w,R;const n={...e},{method:r,path:a,query:o,defaultBaseURL:c}=n,d=this.buildURL(a,o,c);"timeout"in n&&pc("timeout",n.timeout),n.timeout=(m=n.timeout)!=null?m:this.timeout;const{bodyHeaders:h,body:p}=this.buildBody({options:n}),f=await this.buildHeaders({options:e,method:r,bodyHeaders:h,retryCount:t});return{req:{method:r,headers:f,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"},...p&&{body:p},...(w=this.fetchOptions)!=null?w:{},...(R=n.fetchOptions)!=null?R:{}},url:d,timeout:n.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:n,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const o=k([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...xc(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=k([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Wi(e)}:u(this,dn,"f").call(this,{body:e,headers:n})}}Ds=F,dn=new WeakMap,ps=new WeakSet,Zo=function(){return this.baseURL!=="https://api.openai.com/v1"};F.OpenAI=Ds;F.DEFAULT_TIMEOUT=6e5;F.OpenAIError=I;F.APIError=ne;F.APIConnectionError=xn;F.APIConnectionTimeoutError=ys;F.APIUserAbortError=we;F.NotFoundError=ji;F.ConflictError=Mi;F.RateLimitError=$i;F.BadRequestError=Oi;F.AuthenticationError=Ii;F.InternalServerError=Di;F.PermissionDeniedError=Pi;F.UnprocessableEntityError=Li;F.InvalidWebhookSignatureError=yt;F.toFile=qc;F.Completions=Po;F.Chat=Es;F.Embeddings=Mo;F.Files=$o;F.Images=Ho;F.Audio=Pt;F.Moderations=qo;F.Models=zo;F.FineTuning=it;F.Graders=js;F.VectorStores=Tn;F.Webhooks=Qo;F.Beta=jt;F.Batches=To;F.Uploads=$s;F.Responses=Ls;F.Evals=Ns;F.Containers=ks;const _u=()=>{const[s,e]=H.useState(!1),[t,n]=H.useState([]),[r,a]=H.useState(""),[o,c]=H.useState(!1),[d,h]=H.useState(""),[p,f]=H.useState(!1),{t:y,language:m}=gs(),w=H.useRef(null),R=()=>m==="ar"?"مرحباً! أنا مساعد كيدو الذكي. اسألني عن منتجاتنا والتغذية والوصفات!":"Hi! I'm Kiddo AI Assistant. Ask me anything about our products, nutrition, and recipes!";$e.useEffect(()=>{t.length===0&&n([{text:R(),isBot:!0,timestamp:new Date}])},[m]);const A=()=>{var _;(_=w.current)==null||_.scrollIntoView({behavior:"smooth"})},U="\n  Kiddo Arabia Product Information:\n  \n  Products:\n  1. Classic Cornflakes - Our original cornflakes made with natural corn and fortified with vitamins\n  2. Choco Pops - Chocolate-flavored cereal balls loved by kids\n  3. Honey Rings - Sweet honey-flavored ring cereal\n  4. Strawberry Pillows - Pillowy cereal with real strawberry flavor\n  5. Banana Pillows - Soft banana-flavored cereal pillows\n  6. Crunchy Pillows - Extra crunchy cereal pillows\n  7. Choco Rice - Chocolate rice cereal\n  8. Choco Creamo - Creamy chocolate cereal\n  9. Cocoa Scoops - Cocoa-flavored scooped cereal\n  10. Fruit Rings - Mixed fruit-flavored ring cereal\n  11. Choco Flakes - Chocolate-flavored cornflakes\n\n  All products are:\n  - Made with natural ingredients\n  - Fortified with essential vitamins (Vitamin D, Iron, B-vitamins)\n  - Suitable for children aged 2 and above\n  - Available across Middle East and North Africa\n\n  Recipes available:\n  - Classic Cornflakes Bowl\n  - Cornflakes Energy Bars  \n  - Cornflakes Cookies\n  - Cornflakes Ice Cream Sundae\n  - Cornflakes Smoothie Bowl\n  - Cornflakes Crusted Chicken\n\n  Company: Family-owned business focused on healthy nutrition for growing children.\n  ",E=async _=>{var v,C;if(!d)return m==="ar"?"أحتاج إلى مفتاح API للاتصال بالذكاء الاصطناعي. يرجى إدخال مفتاح OpenRouter API الخاص بك.":"I need an API key to connect to AI. Please enter your OpenRouter API key.";try{const L=new F({apiKey:d,baseURL:"https://openrouter.ai/api/v1",dangerouslyAllowBrowser:!0}),j=m==="ar"?"\n      أنت مساعد كيدو الذكي، مساعد ودود ومفيد لعلامة كيدو التجارية للحبوب الصحية للأطفال. تحدث بطريقة ودودة ومناسبة للأطفال، وليس بطريقة آلية.\n\n      معلومات المنتجات: ".concat(U,'\n\n      إرشادات:\n      - أجب باللغة العربية دائماً\n      - كن ودوداً ومفيداً ومناسباً للأطفال  \n      - ركز على منتجات وتغذية كيدو\n      - إذا كان السؤال غير متعلق أو غير واضح، قل: "ما زلت أتعلم! دعني أنقل رسالتك لأحد أعضاء الفريق. في هذه الأثناء، هل يمكنني مساعدتك بأي شيء آخر؟"\n      - تذكر المحادثات السابقة في هذه الجلسة\n      '):"\n      You are Kiddo AI Assistant, a friendly and helpful assistant for Kiddo Arabia, a healthy kids' cereal brand. Speak in a friendly, child-friendly way, never robotic.\n\n      Product Information: ".concat(U,'\n\n      Guidelines:\n      - Always respond in English\n      - Be friendly, helpful, and child-friendly\n      - Focus on Kiddo products and nutrition\n      - If the question is irrelevant or unclear, say: "I\'m still learning! Let me pass your message to a team member. In the meantime, can I help with anything else?"\n      - Remember previous conversations in this session\n      ');return((C=(v=(await L.chat.completions.create({model:"anthropic/claude-3.5-sonnet",messages:[{role:"system",content:j},{role:"user",content:_}],max_tokens:500,temperature:.7})).choices[0])==null?void 0:v.message)==null?void 0:C.content)||(m==="ar"?"آسف، حدث خطأ. يرجى المحاولة مرة أخرى.":"Sorry, there was an error. Please try again.")}catch(L){return console.error("OpenRouter API error:",L),m==="ar"?"عذراً، لا أستطيع الاتصال بالذكاء الاصطناعي حالياً. يرجى التحقق من مفتاح API أو المحاولة لاحقاً.":"Sorry, I can't connect to AI right now. Please check your API key or try again later."}},B=async()=>{if(!r.trim())return;const _=r,v={text:_,isBot:!1,timestamp:new Date};n(C=>[...C,v]),a(""),c(!0);try{const L={text:await E(_),isBot:!0,timestamp:new Date};n(j=>[...j,L])}catch(C){const L={text:m==="ar"?"عذراً، حدث خطأ. يرجى المحاولة مرة أخرى.":"Sorry, there was an error. Please try again.",isBot:!0,timestamp:new Date};n(j=>[...j,L])}finally{c(!1),setTimeout(A,100)}},N=()=>{e(!0),d||f(!0),t.length===1&&n([{text:R(),isBot:!0,timestamp:new Date}])};return i.jsxs(i.Fragment,{children:[i.jsx(ge,{onClick:N,className:"fixed bottom-6 right-6 rounded-full w-14 h-14 shadow-lg z-50",size:"lg",children:i.jsx(Sl,{className:"h-6 w-6"})}),s&&i.jsxs(xi,{className:"fixed bottom-24 right-6 w-80 h-96 shadow-xl z-50",children:[i.jsxs(fl,{className:"flex flex-row items-center justify-between pb-3",children:[i.jsx(ml,{className:"text-lg",children:m==="ar"?"مساعد كيدو الذكي":"Kiddo AI Assistant"}),i.jsx(ge,{variant:"ghost",size:"sm",onClick:()=>e(!1),children:i.jsx(_s,{className:"h-4 w-4"})})]}),i.jsxs(vi,{className:"flex flex-col h-full",children:[p&&i.jsxs("div",{className:"mb-4 p-3 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:m==="ar"?"أدخل مفتاح OpenRouter API:":"Enter your OpenRouter API key:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"password",value:d,onChange:_=>h(_.target.value),placeholder:"sk-or-...",className:"flex-1 px-2 py-1 text-xs border rounded"}),i.jsx(ge,{size:"sm",onClick:()=>f(!1),disabled:!d.trim(),children:m==="ar"?"حفظ":"Save"})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[t.map((_,v)=>i.jsx("div",{className:"flex ".concat(_.isBot?"justify-start":"justify-end"),children:i.jsx("div",{className:"max-w-[80%] p-3 rounded-lg text-sm ".concat(_.isBot?"bg-muted text-muted-foreground":"bg-primary text-primary-foreground"),children:_.text})},v)),o&&i.jsx("div",{className:"flex justify-start",children:i.jsxs("div",{className:"bg-muted text-muted-foreground p-3 rounded-lg text-sm flex items-center gap-2",children:[i.jsx(es,{className:"h-4 w-4 animate-spin"}),m==="ar"?"يكتب...":"Typing..."]})}),i.jsx("div",{ref:w})]}),i.jsxs("div",{className:"flex gap-2",children:[!d&&i.jsx(ge,{variant:"outline",size:"sm",onClick:()=>f(!0),className:"text-xs",children:"API"}),i.jsx("input",{value:r,onChange:_=>a(_.target.value),onKeyPress:_=>_.key==="Enter"&&!o&&B(),placeholder:m==="ar"?"اسأل عن منتجات كيدو...":"Ask about Kiddo products...",className:"flex-1 px-3 py-2 border rounded-lg text-sm",disabled:o}),i.jsx(ge,{size:"sm",onClick:B,disabled:o||!r.trim(),children:o?i.jsx(es,{className:"h-4 w-4 animate-spin"}):i.jsx(El,{className:"h-4 w-4"})})]})]})]})]})},yu=()=>{const[s,e]=H.useState(!1),[t,n]=H.useState(!1),[r,a]=H.useState({necessary:!0,analytics:!1,marketing:!1}),{t:o,language:c}=gs();H.useEffect(()=>{localStorage.getItem("cookie-consent")||e(!0)},[]);const d=()=>{const f={necessary:!0,analytics:!0,marketing:!0};localStorage.setItem("cookie-consent",JSON.stringify(f)),a(f),e(!1)},h=()=>{const f={necessary:!0,analytics:!1,marketing:!1};localStorage.setItem("cookie-consent",JSON.stringify(f)),a(f),e(!1)},p=()=>{localStorage.setItem("cookie-consent",JSON.stringify(r)),e(!1),n(!1)};return s?i.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 bg-background/95 backdrop-blur-sm border-t border-border",children:i.jsx(xi,{className:"max-w-4xl mx-auto",children:i.jsx(vi,{className:"p-6",children:t?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold text-lg",children:c==="ar"?"إعدادات ملفات تعريف الارتباط":"Cookie Settings"}),i.jsx(ge,{variant:"ghost",size:"sm",onClick:()=>n(!1),children:i.jsx(_s,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:c==="ar"?"ضرورية":"Necessary"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:c==="ar"?"مطلوبة لعمل الموقع الأساسي":"Required for basic site functionality"})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:c==="ar"?"مطلوبة دائماً":"Always Required"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:c==="ar"?"التحليلات":"Analytics"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:c==="ar"?"تساعدنا في فهم كيفية استخدام الموقع":"Help us understand how the site is used"})]}),i.jsx("input",{type:"checkbox",checked:r.analytics,onChange:f=>a(y=>({...y,analytics:f.target.checked})),className:"rounded"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:c==="ar"?"التسويق":"Marketing"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:c==="ar"?"لعرض إعلانات مخصصة":"For personalized advertisements"})]}),i.jsx("input",{type:"checkbox",checked:r.marketing,onChange:f=>a(y=>({...y,marketing:f.target.checked})),className:"rounded"})]})]}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx(ge,{variant:"outline",onClick:h,children:c==="ar"?"رفض الكل":"Reject All"}),i.jsx(ge,{onClick:p,children:c==="ar"?"حفظ التفضيلات":"Save Preferences"})]})]}):i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[i.jsx(Cl,{className:"h-6 w-6 text-primary flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg mb-1",children:c==="ar"?"استخدام ملفات تعريف الارتباط":"Cookie Usage"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:c==="ar"?"نستخدم ملفات تعريف الارتباط لتحسين تجربتك وتحليل استخدام الموقع. يمكنك إدارة تفضيلاتك أدناه.":"We use cookies to improve your experience and analyze site usage. You can manage your preferences below."})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[i.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>n(!0),children:[i.jsx(Tl,{className:"h-4 w-4 mr-2"}),c==="ar"?"إعدادات":"Settings"]}),i.jsx(ge,{variant:"outline",size:"sm",onClick:h,children:c==="ar"?"رفض الكل":"Reject All"}),i.jsxs(ge,{size:"sm",onClick:d,children:[i.jsx(kl,{className:"h-4 w-4 mr-2"}),c==="ar"?"قبول الكل":"Accept All"]})]})]})})})}):null},ju=({children:s,showParticles:e=!1,showCursorTrail:t=!1,showScrollProgress:n=!0})=>i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(pl,{}),!1,!1,n&&i.jsx(Ql,{}),i.jsx(Zl,{}),i.jsx(Se.main,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeOut"},className:"relative z-10 pt-16",children:s}),i.jsx(cc,{}),i.jsx(_u,{}),i.jsx(yu,{})]});export{ju as E,Cu as a,Yl as s};
